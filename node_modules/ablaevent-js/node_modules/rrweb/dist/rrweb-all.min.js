var rrweb=function(ne){"use strict";var x;(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(x||(x={}));function gr(t){return t.nodeType===t.ELEMENT_NODE}function Ye(t){var e=t?.host;return Boolean(e?.shadowRoot===t)}function Xe(t){return Object.prototype.toString.call(t)==="[object ShadowRoot]"}function to(t){return t.includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t}function Tt(t){try{var e=t.rules||t.cssRules;return e?to(Array.from(e).map(yr).join("")):null}catch{return null}}function yr(t){var e=t.cssText;if(ro(t))try{e=Tt(t.styleSheet)||e}catch{}return e}function ro(t){return"styleSheet"in t}var Mt=function(){function t(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return t.prototype.getId=function(e){var r;if(!e)return-1;var n=(r=this.getMeta(e))===null||r===void 0?void 0:r.id;return n??-1},t.prototype.getNode=function(e){return this.idNodeMap.get(e)||null},t.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},t.prototype.getMeta=function(e){return this.nodeMetaMap.get(e)||null},t.prototype.removeNodeFromMap=function(e){var r=this,n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach(function(o){return r.removeNodeFromMap(o)})},t.prototype.has=function(e){return this.idNodeMap.has(e)},t.prototype.hasNode=function(e){return this.nodeMetaMap.has(e)},t.prototype.add=function(e,r){var n=r.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,r)},t.prototype.replace=function(e,r){var n=this.getNode(e);if(n){var o=this.nodeMetaMap.get(n);o&&this.nodeMetaMap.set(r,o)}this.idNodeMap.set(e,r)},t.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},t}();function vr(){return new Mt}function It(t){var e=t.element,r=t.maskInputOptions,n=t.tagName,o=t.type,i=t.value,a=t.maskInputFn,l=i||"",s=o&&o.toLowerCase();return(r[n.toLowerCase()]||s&&r[s])&&(a?l=a(l,e):l="*".repeat(l.length)),l}var Sr="__rrweb_original__";function no(t){var e=t.getContext("2d");if(!e)return!0;for(var r=50,n=0;n<t.width;n+=r)for(var o=0;o<t.height;o+=r){var i=e.getImageData,a=Sr in i?i[Sr]:i,l=new Uint32Array(a.call(e,n,o,Math.min(r,t.width-n),Math.min(r,t.height-o)).data.buffer);if(l.some(function(s){return s!==0}))return!1}return!0}function oo(t,e){return!t||!e||t.type!==e.type?!1:t.type===x.Document?t.compatMode===e.compatMode:t.type===x.DocumentType?t.name===e.name&&t.publicId===e.publicId&&t.systemId===e.systemId:t.type===x.Comment||t.type===x.Text||t.type===x.CDATA?t.textContent===e.textContent:t.type===x.Element?t.tagName===e.tagName&&JSON.stringify(t.attributes)===JSON.stringify(e.attributes)&&t.isSVG===e.isSVG&&t.needBlock===e.needBlock:!1}function kt(t){var e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?e.toLowerCase():null}var io=1,so=new RegExp("[^a-z0-9-_:]"),Ze=-2;function br(){return io++}function ao(t){if(t instanceof HTMLFormElement)return"form";var e=t.tagName.toLowerCase().trim();return so.test(e)?"div":e}function lo(t){return t.cssRules?Array.from(t.cssRules).map(function(e){return e.cssText||""}).join(""):""}function co(t){var e="";return t.indexOf("//")>-1?e=t.split("/").slice(0,3).join("/"):e=t.split("/")[0],e=e.split("?")[0],e}var Ae,wr,uo=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,ho=/^(?:[a-z+]+:)?\/\//i,po=/^www\..*/i,mo=/^(data:)([^,]*),(.*)/i;function st(t,e){return(t||"").replace(uo,function(r,n,o,i,a,l){var s=o||a||l,c=n||i||"";if(!s)return r;if(ho.test(s)||po.test(s)||mo.test(s))return"url(".concat(c).concat(s).concat(c,")");if(s[0]==="/")return"url(".concat(c).concat(co(e)+s).concat(c,")");var u=e.split("/"),d=s.split("/");u.pop();for(var h=0,p=d;h<p.length;h++){var m=p[h];m!=="."&&(m===".."?u.pop():u.push(m))}return"url(".concat(c).concat(u.join("/")).concat(c,")")})}var fo=/^[^ \t\n\r\u000c]+/,go=/^[, \t\n\r\u000c]+/;function yo(t,e){if(e.trim()==="")return e;var r=0;function n(c){var u,d=c.exec(e.substring(r));return d?(u=d[0],r+=u.length,u):""}for(var o=[];n(go),!(r>=e.length);){var i=n(fo);if(i.slice(-1)===",")i=at(t,i.substring(0,i.length-1)),o.push(i);else{var a="";i=at(t,i);for(var l=!1;;){var s=e.charAt(r);if(s===""){o.push((i+a).trim());break}else if(l)s===")"&&(l=!1);else if(s===","){r+=1,o.push((i+a).trim());break}else s==="("&&(l=!0);a+=s,r+=1}}}return o.join(", ")}function at(t,e){if(!e||e.trim()==="")return e;var r=t.createElement("a");return r.href=e,r.href}function vo(t){return Boolean(t.tagName==="svg"||t.ownerSVGElement)}function Dt(){var t=document.createElement("a");return t.href="",t.href}function Cr(t,e,r,n){return n&&(r==="src"||r==="href"&&!(e==="use"&&n[0]==="#")||r==="xlink:href"&&n[0]!=="#"||r==="background"&&(e==="table"||e==="td"||e==="th")?at(t,n):r==="srcset"?yo(t,n):r==="style"?st(n,Dt()):e==="object"&&r==="data"?at(t,n):n)}function Er(t,e,r){return(t==="video"||t==="audio")&&e==="autoplay"}function So(t,e,r){try{if(typeof e=="string"){if(t.classList.contains(e))return!0}else for(var n=t.classList.length;n--;){var o=t.classList[n];if(e.test(o))return!0}if(r)return t.matches(r)}catch{}return!1}function lt(t,e,r){if(!t)return!1;if(t.nodeType!==t.ELEMENT_NODE)return r?lt(t.parentNode,e,r):!1;for(var n=t.classList.length;n--;){var o=t.classList[n];if(e.test(o))return!0}return r?lt(t.parentNode,e,r):!1}function Nr(t,e,r){try{var n=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(n===null)return!1;if(typeof e=="string"){if(n.classList.contains(e)||n.closest(".".concat(e)))return!0}else if(lt(n,e,!0))return!0;if(r&&(n.matches(r)||n.closest(r)))return!0}catch{}return!1}function bo(t,e,r){var n=t.contentWindow;if(n){var o=!1,i;try{i=n.document.readyState}catch{return}if(i!=="complete"){var a=setTimeout(function(){o||(e(),o=!0)},r);t.addEventListener("load",function(){clearTimeout(a),o=!0,e()});return}var l="about:blank";if(n.location.href!==l||t.src===l||t.src==="")return setTimeout(e,0),t.addEventListener("load",e);t.addEventListener("load",e)}}function wo(t,e,r){var n=!1,o;try{o=t.sheet}catch{return}if(!o){var i=setTimeout(function(){n||(e(),n=!0)},r);t.addEventListener("load",function(){clearTimeout(i),n=!0,e()})}}function Co(t,e){var r=e.doc,n=e.mirror,o=e.blockClass,i=e.blockSelector,a=e.maskTextClass,l=e.maskTextSelector,s=e.inlineStylesheet,c=e.maskInputOptions,u=c===void 0?{}:c,d=e.maskTextFn,h=e.maskInputFn,p=e.dataURLOptions,m=p===void 0?{}:p,g=e.inlineImages,y=e.recordCanvas,f=e.keepIframeSrcFn,v=e.newlyAddedElement,S=v===void 0?!1:v,E=Eo(r,n);switch(t.nodeType){case t.DOCUMENT_NODE:return t.compatMode!=="CSS1Compat"?{type:x.Document,childNodes:[],compatMode:t.compatMode}:{type:x.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:x.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:E};case t.ELEMENT_NODE:return To(t,{doc:r,blockClass:o,blockSelector:i,inlineStylesheet:s,maskInputOptions:u,maskInputFn:h,dataURLOptions:m,inlineImages:g,recordCanvas:y,keepIframeSrcFn:f,newlyAddedElement:S,rootId:E});case t.TEXT_NODE:return No(t,{maskTextClass:a,maskTextSelector:l,maskTextFn:d,rootId:E});case t.CDATA_SECTION_NODE:return{type:x.CDATA,textContent:"",rootId:E};case t.COMMENT_NODE:return{type:x.Comment,textContent:t.textContent||"",rootId:E};default:return!1}}function Eo(t,e){if(e.hasNode(t)){var r=e.getId(t);return r===1?void 0:r}}function No(t,e){var r,n=e.maskTextClass,o=e.maskTextSelector,i=e.maskTextFn,a=e.rootId,l=t.parentNode&&t.parentNode.tagName,s=t.textContent,c=l==="STYLE"?!0:void 0,u=l==="SCRIPT"?!0:void 0;if(c&&s){try{t.nextSibling||t.previousSibling||!((r=t.parentNode.sheet)===null||r===void 0)&&r.cssRules&&(s=lo(t.parentNode.sheet))}catch(d){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(d),t)}s=st(s,Dt())}return u&&(s="SCRIPT_PLACEHOLDER"),!c&&!u&&s&&Nr(t,n,o)&&(s=i?i(s):s.replace(/[\S]/g,"*")),{type:x.Text,textContent:s||"",isStyle:c,rootId:a}}function To(t,e){for(var r=e.doc,n=e.blockClass,o=e.blockSelector,i=e.inlineStylesheet,a=e.maskInputOptions,l=a===void 0?{}:a,s=e.maskInputFn,c=e.dataURLOptions,u=c===void 0?{}:c,d=e.inlineImages,h=e.recordCanvas,p=e.keepIframeSrcFn,m=e.newlyAddedElement,g=m===void 0?!1:m,y=e.rootId,f=So(t,n,o),v=ao(t),S={},E=t.attributes.length,I=0;I<E;I++){var M=t.attributes[I];Er(v,M.name,M.value)||(S[M.name]=Cr(r,v,M.name,M.value))}if(v==="link"&&i){var L=Array.from(r.styleSheets).find(function(T){return T.href===t.href}),C=null;L&&(C=Tt(L)),C&&(delete S.rel,delete S.href,S._cssText=st(C,L.href))}if(v==="style"&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){var C=Tt(t.sheet);C&&(S._cssText=st(C,Dt()))}if(v==="input"||v==="textarea"||v==="select"){var Y=t.value,W=t.checked;if(S.type!=="radio"&&S.type!=="checkbox"&&S.type!=="submit"&&S.type!=="button"&&Y){var q=kt(t);S.value=It({element:t,type:q,tagName:v,value:Y,maskInputOptions:l,maskInputFn:s})}else W&&(S.checked=W)}if(v==="option"&&(t.selected&&!l.select?S.selected=!0:delete S.selected),v==="canvas"&&h){if(t.__context==="2d")no(t)||(S.rr_dataURL=t.toDataURL(u.type,u.quality));else if(!("__context"in t)){var U=t.toDataURL(u.type,u.quality),V=document.createElement("canvas");V.width=t.width,V.height=t.height;var B=V.toDataURL(u.type,u.quality);U!==B&&(S.rr_dataURL=U)}}if(v==="img"&&d){Ae||(Ae=r.createElement("canvas"),wr=Ae.getContext("2d"));var A=t,F=A.crossOrigin;A.crossOrigin="anonymous";var O=function(){A.removeEventListener("load",O);try{Ae.width=A.naturalWidth,Ae.height=A.naturalHeight,wr.drawImage(A,0,0),S.rr_dataURL=Ae.toDataURL(u.type,u.quality)}catch(T){console.warn("Cannot inline img src=".concat(A.currentSrc,"! Error: ").concat(T))}F?S.crossOrigin=F:A.removeAttribute("crossorigin")};A.complete&&A.naturalWidth!==0?O():A.addEventListener("load",O)}if((v==="audio"||v==="video")&&(S.rr_mediaState=t.paused?"paused":"played",S.rr_mediaCurrentTime=t.currentTime),g||(t.scrollLeft&&(S.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(S.rr_scrollTop=t.scrollTop)),f){var G=t.getBoundingClientRect(),w=G.width,b=G.height;S={class:S.class,rr_width:"".concat(w,"px"),rr_height:"".concat(b,"px")}}return v==="iframe"&&!p(S.src)&&(t.contentDocument||(S.rr_src=S.src),delete S.src),{type:x.Element,tagName:v,attributes:S,childNodes:[],isSVG:vo(t)||void 0,needBlock:f,rootId:y}}function K(t){return t==null?"":t.toLowerCase()}function Mo(t,e){return!!(e.comment&&t.type===x.Comment||t.type===x.Element&&(e.script&&(t.tagName==="script"||t.tagName==="link"&&(t.attributes.rel==="preload"||t.attributes.rel==="modulepreload")&&t.attributes.as==="script"||t.tagName==="link"&&t.attributes.rel==="prefetch"&&typeof t.attributes.href=="string"&&t.attributes.href.endsWith(".js"))||e.headFavicon&&(t.tagName==="link"&&t.attributes.rel==="shortcut icon"||t.tagName==="meta"&&(K(t.attributes.name).match(/^msapplication-tile(image|color)$/)||K(t.attributes.name)==="application-name"||K(t.attributes.rel)==="icon"||K(t.attributes.rel)==="apple-touch-icon"||K(t.attributes.rel)==="shortcut icon"))||t.tagName==="meta"&&(e.headMetaDescKeywords&&K(t.attributes.name).match(/^description|keywords$/)||e.headMetaSocial&&(K(t.attributes.property).match(/^(og|twitter|fb):/)||K(t.attributes.name).match(/^(og|twitter):/)||K(t.attributes.name)==="pinterest")||e.headMetaRobots&&(K(t.attributes.name)==="robots"||K(t.attributes.name)==="googlebot"||K(t.attributes.name)==="bingbot")||e.headMetaHttpEquiv&&t.attributes["http-equiv"]!==void 0||e.headMetaAuthorship&&(K(t.attributes.name)==="author"||K(t.attributes.name)==="generator"||K(t.attributes.name)==="framework"||K(t.attributes.name)==="publisher"||K(t.attributes.name)==="progid"||K(t.attributes.property).match(/^article:/)||K(t.attributes.property).match(/^product:/))||e.headMetaVerification&&(K(t.attributes.name)==="google-site-verification"||K(t.attributes.name)==="yandex-verification"||K(t.attributes.name)==="csrf-token"||K(t.attributes.name)==="p:domain_verify"||K(t.attributes.name)==="verify-v1"||K(t.attributes.name)==="verification"||K(t.attributes.name)==="shopify-checkout-api-token"))))}function Fe(t,e){var r=e.doc,n=e.mirror,o=e.blockClass,i=e.blockSelector,a=e.maskTextClass,l=e.maskTextSelector,s=e.skipChild,c=s===void 0?!1:s,u=e.inlineStylesheet,d=u===void 0?!0:u,h=e.maskInputOptions,p=h===void 0?{}:h,m=e.maskTextFn,g=e.maskInputFn,y=e.slimDOMOptions,f=e.dataURLOptions,v=f===void 0?{}:f,S=e.inlineImages,E=S===void 0?!1:S,I=e.recordCanvas,M=I===void 0?!1:I,L=e.onSerialize,C=e.onIframeLoad,Y=e.iframeLoadTimeout,W=Y===void 0?5e3:Y,q=e.onStylesheetLoad,U=e.stylesheetLoadTimeout,V=U===void 0?5e3:U,B=e.keepIframeSrcFn,A=B===void 0?function(){return!1}:B,F=e.newlyAddedElement,O=F===void 0?!1:F,G=e.preserveWhiteSpace,w=G===void 0?!0:G,b=Co(t,{doc:r,mirror:n,blockClass:o,blockSelector:i,maskTextClass:a,maskTextSelector:l,inlineStylesheet:d,maskInputOptions:p,maskTextFn:m,maskInputFn:g,dataURLOptions:v,inlineImages:E,recordCanvas:M,keepIframeSrcFn:A,newlyAddedElement:O});if(!b)return console.warn(t,"not serialized"),null;var T;n.hasNode(t)?T=n.getId(t):Mo(b,y)||!w&&b.type===x.Text&&!b.isStyle&&!b.textContent.replace(/^\s+|\s+$/gm,"").length?T=Ze:T=br();var D=Object.assign(b,{id:T});if(n.add(t,D),T===Ze)return null;L&&L(t);var z=!c;if(D.type===x.Element){z=z&&!D.needBlock,delete D.needBlock;var ee=t.shadowRoot;ee&&Xe(ee)&&(D.isShadowHost=!0)}if((D.type===x.Document||D.type===x.Element)&&z){y.headWhitespace&&D.type===x.Element&&D.tagName==="head"&&(w=!1);for(var X={doc:r,mirror:n,blockClass:o,blockSelector:i,maskTextClass:a,maskTextSelector:l,skipChild:c,inlineStylesheet:d,maskInputOptions:p,maskTextFn:m,maskInputFn:g,slimDOMOptions:y,dataURLOptions:v,inlineImages:E,recordCanvas:M,preserveWhiteSpace:w,onSerialize:L,onIframeLoad:C,iframeLoadTimeout:W,onStylesheetLoad:q,stylesheetLoadTimeout:V,keepIframeSrcFn:A},ce=0,me=Array.from(t.childNodes);ce<me.length;ce++){var de=me[ce],R=Fe(de,X);R&&D.childNodes.push(R)}if(gr(t)&&t.shadowRoot)for(var ie=0,H=Array.from(t.shadowRoot.childNodes);ie<H.length;ie++){var de=H[ie],R=Fe(de,X);R&&(Xe(t.shadowRoot)&&(R.isShadow=!0),D.childNodes.push(R))}}return t.parentNode&&Ye(t.parentNode)&&Xe(t.parentNode)&&(D.isShadow=!0),D.type===x.Element&&D.tagName==="iframe"&&bo(t,function(){var Q=t.contentDocument;if(Q&&C){var Te=Fe(Q,{doc:Q,mirror:n,blockClass:o,blockSelector:i,maskTextClass:a,maskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:p,maskTextFn:m,maskInputFn:g,slimDOMOptions:y,dataURLOptions:v,inlineImages:E,recordCanvas:M,preserveWhiteSpace:w,onSerialize:L,onIframeLoad:C,iframeLoadTimeout:W,onStylesheetLoad:q,stylesheetLoadTimeout:V,keepIframeSrcFn:A});Te&&C(t,Te)}},W),D.type===x.Element&&D.tagName==="link"&&D.attributes.rel==="stylesheet"&&wo(t,function(){if(q){var Q=Fe(t,{doc:r,mirror:n,blockClass:o,blockSelector:i,maskTextClass:a,maskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:p,maskTextFn:m,maskInputFn:g,slimDOMOptions:y,dataURLOptions:v,inlineImages:E,recordCanvas:M,preserveWhiteSpace:w,onSerialize:L,onIframeLoad:C,iframeLoadTimeout:W,onStylesheetLoad:q,stylesheetLoadTimeout:V,keepIframeSrcFn:A});Q&&q(t,Q)}},V),D}function Io(t,e){var r=e||{},n=r.mirror,o=n===void 0?new Mt:n,i=r.blockClass,a=i===void 0?"rr-block":i,l=r.blockSelector,s=l===void 0?null:l,c=r.maskTextClass,u=c===void 0?"rr-mask":c,d=r.maskTextSelector,h=d===void 0?null:d,p=r.inlineStylesheet,m=p===void 0?!0:p,g=r.inlineImages,y=g===void 0?!1:g,f=r.recordCanvas,v=f===void 0?!1:f,S=r.maskAllInputs,E=S===void 0?!1:S,I=r.maskTextFn,M=r.maskInputFn,L=r.slimDOM,C=L===void 0?!1:L,Y=r.dataURLOptions,W=r.preserveWhiteSpace,q=r.onSerialize,U=r.onIframeLoad,V=r.iframeLoadTimeout,B=r.onStylesheetLoad,A=r.stylesheetLoadTimeout,F=r.keepIframeSrcFn,O=F===void 0?function(){return!1}:F,G=E===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:E===!1?{password:!0}:E,w=C===!0||C==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:C==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:C===!1?{}:C;return Fe(t,{doc:t,mirror:o,blockClass:a,blockSelector:s,maskTextClass:u,maskTextSelector:h,skipChild:!1,inlineStylesheet:m,maskInputOptions:G,maskTextFn:I,maskInputFn:M,slimDOMOptions:w,dataURLOptions:Y,inlineImages:y,recordCanvas:v,preserveWhiteSpace:W,onSerialize:q,onIframeLoad:U,iframeLoadTimeout:V,onStylesheetLoad:B,stylesheetLoadTimeout:A,keepIframeSrcFn:O,newlyAddedElement:!1})}var Tr=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function ko(t,e){e===void 0&&(e={});var r=1,n=1;function o(w){var b=w.match(/\n/g);b&&(r+=b.length);var T=w.lastIndexOf(`
`);n=T===-1?n+w.length:w.length-T}function i(){var w={line:r,column:n};return function(b){return b.position=new a(w),m(),b}}var a=function(){function w(b){this.start=b,this.end={line:r,column:n},this.source=e.source}return w}();a.prototype.content=t;var l=[];function s(w){var b=new Error("".concat(e.source||"",":").concat(r,":").concat(n,": ").concat(w));if(b.reason=w,b.filename=e.source,b.line=r,b.column=n,b.source=t,e.silent)l.push(b);else throw b}function c(){var w=h();return{type:"stylesheet",stylesheet:{source:e.source,rules:w,parsingErrors:l}}}function u(){return p(/^{\s*/)}function d(){return p(/^}/)}function h(){var w,b=[];for(m(),g(b);t.length&&t.charAt(0)!=="}"&&(w=O()||G());)w!==!1&&(b.push(w),g(b));return b}function p(w){var b=w.exec(t);if(b){var T=b[0];return o(T),t=t.slice(T.length),b}}function m(){p(/^\s*/)}function g(w){w===void 0&&(w=[]);for(var b;b=y();)b!==!1&&w.push(b),b=y();return w}function y(){var w=i();if(!(t.charAt(0)!=="/"||t.charAt(1)!=="*")){for(var b=2;t.charAt(b)!==""&&(t.charAt(b)!=="*"||t.charAt(b+1)!=="/");)++b;if(b+=2,t.charAt(b-1)==="")return s("End of comment missing");var T=t.slice(2,b-2);return n+=2,o(T),t=t.slice(b),n+=2,w({type:"comment",comment:T})}}function f(){var w=p(/^([^{]+)/);if(w)return be(w[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(b){return b.replace(/,/g,"\u200C")}).split(/\s*(?![^(]*\)),\s*/).map(function(b){return b.replace(/\u200C/g,",")})}function v(){var w=i(),b=p(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(b){var T=be(b[0]);if(!p(/^:\s*/))return s("property missing ':'");var D=p(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),z=w({type:"declaration",property:T.replace(Tr,""),value:D?be(D[0]).replace(Tr,""):""});return p(/^[;\s]*/),z}}function S(){var w=[];if(!u())return s("missing '{'");g(w);for(var b;b=v();)b!==!1&&(w.push(b),g(w)),b=v();return d()?w:s("missing '}'")}function E(){for(var w,b=[],T=i();w=p(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)b.push(w[1]),p(/^,\s*/);if(b.length)return T({type:"keyframe",values:b,declarations:S()})}function I(){var w=i(),b=p(/^@([-\w]+)?keyframes\s*/);if(b){var T=b[1];if(b=p(/^([-\w]+)\s*/),!b)return s("@keyframes missing name");var D=b[1];if(!u())return s("@keyframes missing '{'");for(var z,ee=g();z=E();)ee.push(z),ee=ee.concat(g());return d()?w({type:"keyframes",name:D,vendor:T,keyframes:ee}):s("@keyframes missing '}'")}}function M(){var w=i(),b=p(/^@supports *([^{]+)/);if(b){var T=be(b[1]);if(!u())return s("@supports missing '{'");var D=g().concat(h());return d()?w({type:"supports",supports:T,rules:D}):s("@supports missing '}'")}}function L(){var w=i(),b=p(/^@host\s*/);if(b){if(!u())return s("@host missing '{'");var T=g().concat(h());return d()?w({type:"host",rules:T}):s("@host missing '}'")}}function C(){var w=i(),b=p(/^@media *([^{]+)/);if(b){var T=be(b[1]);if(!u())return s("@media missing '{'");var D=g().concat(h());return d()?w({type:"media",media:T,rules:D}):s("@media missing '}'")}}function Y(){var w=i(),b=p(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(b)return w({type:"custom-media",name:be(b[1]),media:be(b[2])})}function W(){var w=i(),b=p(/^@page */);if(b){var T=f()||[];if(!u())return s("@page missing '{'");for(var D=g(),z;z=v();)D.push(z),D=D.concat(g());return d()?w({type:"page",selectors:T,declarations:D}):s("@page missing '}'")}}function q(){var w=i(),b=p(/^@([-\w]+)?document *([^{]+)/);if(b){var T=be(b[1]),D=be(b[2]);if(!u())return s("@document missing '{'");var z=g().concat(h());return d()?w({type:"document",document:D,vendor:T,rules:z}):s("@document missing '}'")}}function U(){var w=i(),b=p(/^@font-face\s*/);if(b){if(!u())return s("@font-face missing '{'");for(var T=g(),D;D=v();)T.push(D),T=T.concat(g());return d()?w({type:"font-face",declarations:T}):s("@font-face missing '}'")}}var V=F("import"),B=F("charset"),A=F("namespace");function F(w){var b=new RegExp("^@"+w+"\\s*([^;]+);");return function(){var T=i(),D=p(b);if(D){var z={type:w};return z[w]=D[1].trim(),T(z)}}}function O(){if(t[0]==="@")return I()||C()||Y()||M()||V()||B()||A()||q()||W()||L()||U()}function G(){var w=i(),b=f();return b?(g(),w({type:"rule",selectors:b,declarations:S()})):s("selector missing")}return Ot(c())}function be(t){return t?t.replace(/^\s+|\s+$/g,""):""}function Ot(t,e){for(var r=t&&typeof t.type=="string",n=r?t:e,o=0,i=Object.keys(t);o<i.length;o++){var a=i[o],l=t[a];Array.isArray(l)?l.forEach(function(s){Ot(s,n)}):l&&typeof l=="object"&&Ot(l,n)}return r&&Object.defineProperty(t,"parent",{configurable:!0,writable:!0,enumerable:!1,value:e||null}),t}var Mr={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function Do(t){var e=Mr[t.tagName]?Mr[t.tagName]:t.tagName;return e==="link"&&t.attributes._cssText&&(e="style"),e}function Oo(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var Ir=/([^\\]):hover/,Ro=new RegExp(Ir.source,"g");function kr(t,e){var r=e?.stylesWithHoverClass.get(t);if(r)return r;var n=ko(t,{silent:!0});if(!n.stylesheet)return t;var o=[];if(n.stylesheet.rules.forEach(function(l){"selectors"in l&&(l.selectors||[]).forEach(function(s){Ir.test(s)&&o.push(s)})}),o.length===0)return t;var i=new RegExp(o.filter(function(l,s){return o.indexOf(l)===s}).sort(function(l,s){return s.length-l.length}).map(function(l){return Oo(l)}).join("|"),"g"),a=t.replace(i,function(l){var s=l.replace(Ro,"$1.\\:hover");return"".concat(l,", ").concat(s)});return e?.stylesWithHoverClass.set(t,a),a}function Dr(){var t=new Map;return{stylesWithHoverClass:t}}function xo(t,e){var r=e.doc,n=e.hackCss,o=e.cache;switch(t.type){case x.Document:return r.implementation.createDocument(null,"",null);case x.DocumentType:return r.implementation.createDocumentType(t.name||"html",t.publicId,t.systemId);case x.Element:{var i=Do(t),a;t.isSVG?a=r.createElementNS("http://www.w3.org/2000/svg",i):a=r.createElement(i);var l={};for(var s in t.attributes)if(Object.prototype.hasOwnProperty.call(t.attributes,s)){var c=t.attributes[s];if(!(i==="option"&&s==="selected"&&c===!1)&&c!==null){if(c===!0&&(c=""),s.startsWith("rr_")){l[s]=c;continue}var u=i==="textarea"&&s==="value",d=i==="style"&&s==="_cssText";if(d&&n&&typeof c=="string"&&(c=kr(c,o)),(u||d)&&typeof c=="string"){for(var h=r.createTextNode(c),p=0,m=Array.from(a.childNodes);p<m.length;p++){var g=m[p];g.nodeType===a.TEXT_NODE&&a.removeChild(g)}a.appendChild(h);continue}try{if(t.isSVG&&s==="xlink:href")a.setAttributeNS("http://www.w3.org/1999/xlink",s,c.toString());else if(s==="onload"||s==="onclick"||s.substring(0,7)==="onmouse")a.setAttribute("_"+s,c.toString());else if(i==="meta"&&t.attributes["http-equiv"]==="Content-Security-Policy"&&s==="content"){a.setAttribute("csp-content",c.toString());continue}else i==="link"&&(t.attributes.rel==="preload"||t.attributes.rel==="modulepreload")&&t.attributes.as==="script"||i==="link"&&t.attributes.rel==="prefetch"&&typeof t.attributes.href=="string"&&t.attributes.href.endsWith(".js")||(i==="img"&&t.attributes.srcset&&t.attributes.rr_dataURL?a.setAttribute("rrweb-original-srcset",t.attributes.srcset):a.setAttribute(s,c.toString()))}catch{}}}var y=function(v){var S=l[v];if(i==="canvas"&&v==="rr_dataURL"){var E=document.createElement("img");E.onload=function(){var M=a.getContext("2d");M&&M.drawImage(E,0,0,E.width,E.height)},E.src=S.toString(),a.RRNodeType&&(a.rr_dataURL=S.toString())}else if(i==="img"&&v==="rr_dataURL"){var I=a;I.currentSrc.startsWith("data:")||(I.setAttribute("rrweb-original-src",t.attributes.src),I.src=S.toString())}if(v==="rr_width")a.style.width=S.toString();else if(v==="rr_height")a.style.height=S.toString();else if(v==="rr_mediaCurrentTime"&&typeof S=="number")a.currentTime=S;else if(v==="rr_mediaState")switch(S){case"played":a.play().catch(function(M){return console.warn("media playback error",M)});break;case"paused":a.pause();break}};for(var f in l)y(f);if(t.isShadowHost)if(!a.shadowRoot)a.attachShadow({mode:"open"});else for(;a.shadowRoot.firstChild;)a.shadowRoot.removeChild(a.shadowRoot.firstChild);return a}case x.Text:return r.createTextNode(t.isStyle&&n?kr(t.textContent,o):t.textContent);case x.CDATA:return r.createCDATASection(t.textContent);case x.Comment:return r.createComment(t.textContent);default:return null}}function Ke(t,e){var r=e.doc,n=e.mirror,o=e.skipChild,i=o===void 0?!1:o,a=e.hackCss,l=a===void 0?!0:a,s=e.afterAppend,c=e.cache;if(n.has(t.id)){var u=n.getNode(t.id),d=n.getMeta(u);if(oo(d,t))return n.getNode(t.id)}var h=xo(t,{doc:r,hackCss:l,cache:c});if(!h)return null;if(t.rootId&&n.getNode(t.rootId)!==r&&n.replace(t.rootId,r),t.type===x.Document&&(r.close(),r.open(),t.compatMode==="BackCompat"&&t.childNodes&&t.childNodes[0].type!==x.DocumentType&&(t.childNodes[0].type===x.Element&&"xmlns"in t.childNodes[0].attributes&&t.childNodes[0].attributes.xmlns==="http://www.w3.org/1999/xhtml"?r.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):r.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),h=r),n.add(h,t),(t.type===x.Document||t.type===x.Element)&&!i)for(var p=function(f){var v=Ke(f,{doc:r,mirror:n,skipChild:!1,hackCss:l,afterAppend:s,cache:c});if(!v)return console.warn("Failed to rebuild",f),"continue";if(f.isShadow&&gr(h)&&h.shadowRoot)h.shadowRoot.appendChild(v);else if(t.type===x.Document&&f.type==x.Element){var S=v,E=null;S.childNodes.forEach(function(I){I.nodeName==="BODY"&&(E=I)}),E?(S.removeChild(E),h.appendChild(v),S.appendChild(E)):h.appendChild(v)}else h.appendChild(v);s&&s(v,f.id)},m=0,g=t.childNodes;m<g.length;m++){var y=g[m];p(y)}return h}function Lo(t,e){function r(a){e(a)}for(var n=0,o=t.getIds();n<o.length;n++){var i=o[n];t.has(i)&&r(t.getNode(i))}}function Ao(t,e){var r=e.getMeta(t);if(r?.type===x.Element){var n=t;for(var o in r.attributes)if(Object.prototype.hasOwnProperty.call(r.attributes,o)&&o.startsWith("rr_")){var i=r.attributes[o];o==="rr_scrollLeft"&&(n.scrollLeft=i),o==="rr_scrollTop"&&(n.scrollTop=i)}}}function Fo(t,e){var r=e.doc,n=e.onVisit,o=e.hackCss,i=o===void 0?!0:o,a=e.afterAppend,l=e.cache,s=e.mirror,c=s===void 0?new Mt:s,u=Ke(t,{doc:r,mirror:c,skipChild:!1,hackCss:i,afterAppend:a,cache:l});return Lo(c,function(d){n&&n(d),Ao(d,c)}),u}function ae(t,e,r=document){const n={capture:!0,passive:!0};return r.addEventListener(t,e,n),()=>r.removeEventListener(t,e,n)}const _e=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;ne.mirror={map:{},getId(){return console.error(_e),-1},getNode(){return console.error(_e),null},removeNodeFromMap(){console.error(_e)},has(){return console.error(_e),!1},reset(){console.error(_e)}},typeof window<"u"&&window.Proxy&&window.Reflect&&(ne.mirror=new Proxy(ne.mirror,{get(t,e,r){return e==="map"&&console.error(_e),Reflect.get(t,e,r)}}));function Pe(t,e,r={}){let n=null,o=0;return function(...i){const a=Date.now();!o&&r.leading===!1&&(o=a);const l=e-(a-o),s=this;l<=0||l>e?(n&&(clearTimeout(n),n=null),o=a,t.apply(s,i)):!n&&r.trailing!==!1&&(n=setTimeout(()=>{o=r.leading===!1?0:Date.now(),n=null,t.apply(s,i)},l))}}function Je(t,e,r,n,o=window){const i=o.Object.getOwnPropertyDescriptor(t,e);return o.Object.defineProperty(t,e,n?r:{set(a){setTimeout(()=>{r.set.call(this,a)},0),i&&i.set&&i.set.call(this,a)}}),()=>Je(t,e,i||{},!0)}function Re(t,e,r){try{if(!(e in t))return()=>{};const n=t[e],o=r(n);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:n}})),t[e]=o,()=>{t[e]=n}}catch{return()=>{}}}function Rt(t){var e,r,n,o,i,a;const l=t.document;return{left:l.scrollingElement?l.scrollingElement.scrollLeft:t.pageXOffset!==void 0?t.pageXOffset:l?.documentElement.scrollLeft||((r=(e=l?.body)==null?void 0:e.parentElement)==null?void 0:r.scrollLeft)||((n=l?.body)==null?void 0:n.scrollLeft)||0,top:l.scrollingElement?l.scrollingElement.scrollTop:t.pageYOffset!==void 0?t.pageYOffset:l?.documentElement.scrollTop||((i=(o=l?.body)==null?void 0:o.parentElement)==null?void 0:i.scrollTop)||((a=l?.body)==null?void 0:a.scrollTop)||0}}function xt(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Lt(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function le(t,e,r,n){if(!t)return!1;const o=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(!o)return!1;try{if(typeof e=="string"){if(o.classList.contains(e)||n&&o.closest("."+e)!==null)return!0}else if(lt(o,e,n))return!0}catch{}return!!(r&&(o.matches(r)||n&&o.closest(r)!==null))}function Or(t,e){return e.getId(t)!==-1}function ct(t,e){return e.getId(t)===Ze}function At(t,e){if(Ye(t))return!1;const r=e.getId(t);return e.has(r)?t.parentNode&&t.parentNode.nodeType===t.DOCUMENT_NODE?!1:t.parentNode?At(t.parentNode,e):!0:!0}function ut(t){return Boolean(t.changedTouches)}function Ft(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let r=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do if(this===r)return!0;while(r=r&&r.parentNode);return!1})}function Rr(t){const e={},r=(o,i)=>{const a={value:o,parent:i,children:[]};return e[o.node.id]=a,a},n=[];for(const o of t){const{nextId:i,parentId:a}=o;if(i&&i in e){const l=e[i];if(l.parent){const s=l.parent.children.indexOf(l);l.parent.children.splice(s,0,r(o,l.parent))}else{const s=n.indexOf(l);n.splice(s,0,r(o,null))}continue}if(a in e){const l=e[a];l.children.push(r(o,l));continue}n.push(r(o,null))}return n}function _t(t,e){e(t.value);for(let r=t.children.length-1;r>=0;r--)_t(t.children[r],e)}function $e(t,e){return Boolean(t.nodeName==="IFRAME"&&e.getMeta(t))}function Pt(t,e){return Boolean(t.nodeName==="LINK"&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&t.getAttribute("rel")==="stylesheet"&&e.getMeta(t))}function $t(t,e){var r,n;const o=(n=(r=t.ownerDocument)==null?void 0:r.defaultView)==null?void 0:n.frameElement;if(!o||o===e)return{x:0,y:0,relativeScale:1,absoluteScale:1};const i=o.getBoundingClientRect(),a=$t(o,e),l=i.height/o.clientHeight;return{x:i.x*a.relativeScale+a.x,y:i.y*a.relativeScale+a.y,relativeScale:l,absoluteScale:a.absoluteScale*l}}function Me(t){return Boolean(t?.shadowRoot)}function We(t,e){const r=t[e[0]];return e.length===1?r:We(r.cssRules[e[1]].cssRules,e.slice(2))}function Wt(t){const e=[...t],r=e.pop();return{positions:e,index:r}}function xr(t){const e=new Set,r=[];for(let n=t.length;n--;){const o=t[n];e.has(o.id)||(r.push(o),e.add(o.id))}return r}class Ut{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){var r;return(r=this.styleIDMap.get(e))!=null?r:-1}has(e){return this.styleIDMap.has(e)}add(e,r){if(this.has(e))return this.getId(e);let n;return r===void 0?n=this.id++:n=r,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function jt(t){var e,r;let n=null;return((r=(e=t.getRootNode)==null?void 0:e.call(t))==null?void 0:r.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(n=t.getRootNode().host),n}function Lr(t){let e=t,r;for(;r=jt(e);)e=r;return e}function Ar(t){const e=t.ownerDocument;if(!e)return!1;const r=Lr(t);return e.contains(r)}function Vt(t){const e=t.ownerDocument;return e?e.contains(t)||Ar(t):!1}var _o=Object.freeze({__proto__:null,on:ae,get _mirror(){return ne.mirror},throttle:Pe,hookSetter:Je,patch:Re,getWindowScroll:Rt,getWindowHeight:xt,getWindowWidth:Lt,isBlocked:le,isSerialized:Or,isIgnored:ct,isAncestorRemoved:At,legacy_isTouchEvent:ut,polyfill:Ft,queueToResolveTrees:Rr,iterateResolveTree:_t,isSerializedIframe:$e,isSerializedStylesheet:Pt,getBaseDimension:$t,hasShadowRoot:Me,getNestedRule:We,getPositionsAndIndex:Wt,uniqueTextMutations:xr,StyleSheetMirror:Ut,getShadowHost:jt,getRootShadowHost:Lr,shadowHostInDom:Ar,inDom:Vt}),k=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(k||{}),N=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t))(N||{}),$=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))($||{}),we=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(we||{}),Ce=(t=>(t[t["2D"]=0]="2D",t[t.WebGL=1]="WebGL",t[t.WebGL2=2]="WebGL2",t))(Ce||{}),Ee=(t=>(t[t.Play=0]="Play",t[t.Pause=1]="Pause",t[t.Seeked=2]="Seeked",t[t.VolumeChange=3]="VolumeChange",t[t.RateChange=4]="RateChange",t))(Ee||{}),j=(t=>(t.Start="start",t.Pause="pause",t.Resume="resume",t.Resize="resize",t.Finish="finish",t.FullsnapshotRebuilded="fullsnapshot-rebuilded",t.LoadStylesheetStart="load-stylesheet-start",t.LoadStylesheetEnd="load-stylesheet-end",t.SkipStart="skip-start",t.SkipEnd="skip-end",t.MouseInteraction="mouse-interaction",t.EventCast="event-cast",t.CustomEvent="custom-event",t.Flush="flush",t.StateChange="state-change",t.PlayBack="play-back",t.Destroy="destroy",t))(j||{});function Fr(t){return"__ln"in t}class Po{constructor(){this.length=0,this.head=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let r=this.head;for(let n=0;n<e;n++)r=r?.next||null;return r}addNode(e){const r={value:e,previous:null,next:null};if(e.__ln=r,e.previousSibling&&Fr(e.previousSibling)){const n=e.previousSibling.__ln.next;r.next=n,r.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=r,n&&(n.previous=r)}else if(e.nextSibling&&Fr(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;r.previous=n,r.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=r,n&&(n.next=r)}else this.head&&(this.head.previous=r),r.next=this.head,this.head=r;this.length++}removeNode(e){const r=e.__ln;!this.head||(r.previous?(r.previous.next=r.next,r.next&&(r.next.previous=r.previous)):(this.head=r.next,this.head&&(this.head.previous=null)),e.__ln&&delete e.__ln,this.length--)}}const _r=(t,e)=>`${t}@${e}`;class $o{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],r=new Po,n=l=>{let s=l,c=Ze;for(;c===Ze;)s=s&&s.nextSibling,c=s&&this.mirror.getId(s);return c},o=l=>{if(!l.parentNode||!Vt(l))return;const s=Ye(l.parentNode)?this.mirror.getId(jt(l)):this.mirror.getId(l.parentNode),c=n(l);if(s===-1||c===-1)return r.addNode(l);const u=Fe(l,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:d=>{$e(d,this.mirror)&&this.iframeManager.addIframe(d),Pt(d,this.mirror)&&this.stylesheetManager.trackLinkElement(d),Me(l)&&this.shadowDomManager.addShadowRoot(l.shadowRoot,this.doc)},onIframeLoad:(d,h)=>{this.iframeManager.attachIframe(d,h),this.shadowDomManager.observeAttachShadow(d)},onStylesheetLoad:(d,h)=>{this.stylesheetManager.attachLinkElement(d,h)}});u&&e.push({parentId:s,nextId:c,node:u})};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const l of this.movedSet)Pr(this.removes,l,this.mirror)&&!this.movedSet.has(l.parentNode)||o(l);for(const l of this.addedSet)!Wr(this.droppedSet,l)&&!Pr(this.removes,l,this.mirror)||Wr(this.movedSet,l)?o(l):this.droppedSet.add(l);let i=null;for(;r.length;){let l=null;if(i){const s=this.mirror.getId(i.value.parentNode),c=n(i.value);s!==-1&&c!==-1&&(l=i)}if(!l)for(let s=r.length-1;s>=0;s--){const c=r.get(s);if(c){const u=this.mirror.getId(c.value.parentNode);if(n(c.value)===-1)continue;if(u!==-1){l=c;break}else{const d=c.value;if(d.parentNode&&d.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const h=d.parentNode.host;if(this.mirror.getId(h)!==-1){l=c;break}}}}}if(!l){for(;r.head;)r.removeNode(r.head.value);break}i=l.previous,r.removeNode(l.value),o(l.value)}const a={texts:this.texts.map(l=>({id:this.mirror.getId(l.node),value:l.value})).filter(l=>this.mirror.has(l.id)),attributes:this.attributes.map(l=>({id:this.mirror.getId(l.node),attributes:l.attributes})).filter(l=>this.mirror.has(l.id)),removes:this.removes,adds:e};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=e=>{if(!ct(e.target,this.mirror))switch(e.type){case"characterData":{const r=e.target.textContent;!le(e.target,this.blockClass,this.blockSelector,!1)&&r!==e.oldValue&&this.texts.push({value:Nr(e.target,this.maskTextClass,this.maskTextSelector)&&r?this.maskTextFn?this.maskTextFn(r):r.replace(/[\S]/g,"*"):r,node:e.target});break}case"attributes":{const r=e.target;let n=e.attributeName,o=e.target.getAttribute(n);if(n==="value"){const a=kt(r);o=It({element:r,maskInputOptions:this.maskInputOptions,tagName:r.tagName,type:a,value:o,maskInputFn:this.maskInputFn})}if(le(e.target,this.blockClass,this.blockSelector,!1)||o===e.oldValue)return;let i=this.attributes.find(a=>a.node===e.target);if(r.tagName==="IFRAME"&&n==="src"&&!this.keepIframeSrcFn(o))if(!r.contentDocument)n="rr_src";else return;if(i||(i={node:e.target,attributes:{}},this.attributes.push(i)),n==="type"&&r.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&r.setAttribute("data-rr-is-password","true"),n==="style"){const a=this.doc.createElement("span");e.oldValue&&a.setAttribute("style",e.oldValue),(i.attributes.style===void 0||i.attributes.style===null)&&(i.attributes.style={});const l=i.attributes.style;for(const s of Array.from(r.style)){const c=r.style.getPropertyValue(s),u=r.style.getPropertyPriority(s);(c!==a.style.getPropertyValue(s)||u!==a.style.getPropertyPriority(s))&&(u===""?l[s]=c:l[s]=[c,u])}for(const s of Array.from(a.style))r.style.getPropertyValue(s)===""&&(l[s]=!1)}else Er(r.tagName,n)||(i.attributes[n]=Cr(this.doc,r.tagName,n,o));break}case"childList":{if(le(e.target,this.blockClass,this.blockSelector,!0))return;e.addedNodes.forEach(r=>this.genAdds(r,e.target)),e.removedNodes.forEach(r=>{const n=this.mirror.getId(r),o=Ye(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);le(e.target,this.blockClass,this.blockSelector,!1)||ct(r,this.mirror)||!Or(r,this.mirror)||(this.addedSet.has(r)?(Bt(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(e.target)&&n===-1||At(e.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[_r(n,o)]?Bt(this.movedSet,r):this.removes.push({parentId:o,id:n,isShadow:Ye(e.target)&&Xe(e.target)?!0:void 0})),this.mapRemoves.push(r))});break}}},this.genAdds=(e,r)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)){if(this.mirror.hasNode(e)){if(ct(e,this.mirror))return;this.movedSet.add(e);let n=null;r&&this.mirror.hasNode(r)&&(n=this.mirror.getId(r)),n&&n!==-1&&(this.movedMap[_r(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);le(e,this.blockClass,this.blockSelector,!1)||(e.childNodes.forEach(n=>this.genAdds(n)),Me(e)&&e.shadowRoot.childNodes.forEach(n=>{this.processedNodeManager.add(n,this),this.genAdds(n,e)}))}}}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(r=>{this[r]=e[r]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Bt(t,e){t.delete(e),e.childNodes.forEach(r=>Bt(t,r))}function Pr(t,e,r){return t.length===0?!1:$r(t,e,r)}function $r(t,e,r){const{parentNode:n}=e;if(!n)return!1;const o=r.getId(n);return t.some(i=>i.id===o)?!0:$r(t,n,r)}function Wr(t,e){return t.size===0?!1:Ur(t,e)}function Ur(t,e){const{parentNode:r}=e;return r?t.has(r)?!0:Ur(t,r):!1}let Qe;function Wo(t){Qe=t}function Uo(){Qe=void 0}const _=t=>Qe?(...e)=>{try{return t(...e)}catch(r){if(Qe&&Qe(r)===!0)return;throw r}}:t;var jo=Object.defineProperty,Vo=Object.defineProperties,Bo=Object.getOwnPropertyDescriptors,jr=Object.getOwnPropertySymbols,Go=Object.prototype.hasOwnProperty,zo=Object.prototype.propertyIsEnumerable,Vr=(t,e,r)=>e in t?jo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Gt=(t,e)=>{for(var r in e||(e={}))Go.call(e,r)&&Vr(t,r,e[r]);if(jr)for(var r of jr(e))zo.call(e,r)&&Vr(t,r,e[r]);return t},Ho=(t,e)=>Vo(t,Bo(e));const xe=[];function qe(t){try{if("composedPath"in t){const e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0];return t.target}catch{return t.target}}function Br(t,e){var r,n;const o=new $o;xe.push(o),o.init(t);let i=window.MutationObserver||window.__rrMutationObserver;const a=(n=(r=window?.Zone)==null?void 0:r.__symbol__)==null?void 0:n.call(r,"MutationObserver");a&&window[a]&&(i=window[a]);const l=new i(_(o.processMutations.bind(o)));return l.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),l}function Yo({mousemoveCb:t,sampling:e,doc:r,mirror:n}){if(e.mousemove===!1)return()=>{};const o=typeof e.mousemove=="number"?e.mousemove:50,i=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500;let a=[],l;const s=Pe(_(d=>{const h=Date.now()-l;t(a.map(p=>(p.timeOffset-=h,p)),d),a=[],l=null}),i),c=_(Pe(_(d=>{const h=qe(d),{clientX:p,clientY:m}=ut(d)?d.changedTouches[0]:d;l||(l=Date.now()),a.push({x:p,y:m,id:n.getId(h),timeOffset:Date.now()-l}),s(typeof DragEvent<"u"&&d instanceof DragEvent?N.Drag:d instanceof MouseEvent?N.MouseMove:N.TouchMove)}),o,{trailing:!1})),u=[ae("mousemove",c,r),ae("touchmove",c,r),ae("drag",c,r)];return _(()=>{u.forEach(d=>d())})}function Xo({mouseInteractionCb:t,doc:e,mirror:r,blockClass:n,blockSelector:o,sampling:i}){if(i.mouseInteraction===!1)return()=>{};const a=i.mouseInteraction===!0||i.mouseInteraction===void 0?{}:i.mouseInteraction,l=[];let s=null;const c=u=>d=>{const h=qe(d);if(le(h,n,o,!0))return;let p=null,m=u;if("pointerType"in d){switch(d.pointerType){case"mouse":p=we.Mouse;break;case"touch":p=we.Touch;break;case"pen":p=we.Pen;break}p===we.Touch?$[u]===$.MouseDown?m="TouchStart":$[u]===$.MouseUp&&(m="TouchEnd"):we.Pen}else ut(d)&&(p=we.Touch);p!==null?(s=p,(m.startsWith("Touch")&&p===we.Touch||m.startsWith("Mouse")&&p===we.Mouse)&&(p=null)):$[u]===$.Click&&(p=s,s=null);const g=ut(d)?d.changedTouches[0]:d;if(!g)return;const y=r.getId(h),{clientX:f,clientY:v}=g;_(t)(Gt({type:$[m],id:y,x:f,y:v},p!==null&&{pointerType:p}))};return Object.keys($).filter(u=>Number.isNaN(Number(u))&&!u.endsWith("_Departed")&&a[u]!==!1).forEach(u=>{let d=u.toLowerCase();const h=c(u);if(window.PointerEvent)switch($[u]){case $.MouseDown:case $.MouseUp:d=d.replace("mouse","pointer");break;case $.TouchStart:case $.TouchEnd:return}l.push(ae(d,h,e))}),_(()=>{l.forEach(u=>u())})}function Gr({scrollCb:t,doc:e,mirror:r,blockClass:n,blockSelector:o,sampling:i}){const a=_(Pe(_(l=>{const s=qe(l);if(!s||le(s,n,o,!0))return;const c=r.getId(s);if(s===e&&e.defaultView){const u=Rt(e.defaultView);t({id:c,x:u.left,y:u.top})}else t({id:c,x:s.scrollLeft,y:s.scrollTop})}),i.scroll||100));return ae("scroll",a,e)}function Zo({viewportResizeCb:t}){let e=-1,r=-1;const n=_(Pe(_(()=>{const o=xt(),i=Lt();(e!==o||r!==i)&&(t({width:Number(i),height:Number(o)}),e=o,r=i)}),200));return ae("resize",n,window)}function zr(t,e){const r=Gt({},t);return e||delete r.userTriggered,r}const Ko=["INPUT","TEXTAREA","SELECT"],Hr=new WeakMap;function Jo({inputCb:t,doc:e,mirror:r,blockClass:n,blockSelector:o,ignoreClass:i,maskInputOptions:a,maskInputFn:l,sampling:s,userTriggeredOnInput:c}){function u(y){let f=qe(y);const v=y.isTrusted,S=f&&f.tagName;if(f&&S==="OPTION"&&(f=f.parentElement),!f||!S||Ko.indexOf(S)<0||le(f,n,o,!0)||f.classList.contains(i))return;let E=f.value,I=!1;const M=kt(f)||"";M==="radio"||M==="checkbox"?I=f.checked:(a[S.toLowerCase()]||a[M])&&(E=It({element:f,maskInputOptions:a,tagName:S,type:M,value:E,maskInputFn:l})),d(f,_(zr)({text:E,isChecked:I,userTriggered:v},c));const L=f.name;M==="radio"&&L&&I&&e.querySelectorAll(`input[type="radio"][name="${L}"]`).forEach(C=>{C!==f&&d(C,_(zr)({text:C.value,isChecked:!I,userTriggered:!1},c))})}function d(y,f){const v=Hr.get(y);if(!v||v.text!==f.text||v.isChecked!==f.isChecked){Hr.set(y,f);const S=r.getId(y);_(t)(Ho(Gt({},f),{id:S}))}}const h=(s.input==="last"?["change"]:["input","change"]).map(y=>ae(y,_(u),e)),p=e.defaultView;if(!p)return()=>{h.forEach(y=>y())};const m=p.Object.getOwnPropertyDescriptor(p.HTMLInputElement.prototype,"value"),g=[[p.HTMLInputElement.prototype,"value"],[p.HTMLInputElement.prototype,"checked"],[p.HTMLSelectElement.prototype,"value"],[p.HTMLTextAreaElement.prototype,"value"],[p.HTMLSelectElement.prototype,"selectedIndex"],[p.HTMLOptionElement.prototype,"selected"]];return m&&m.set&&h.push(...g.map(y=>Je(y[0],y[1],{set(){_(u)({target:this,isTrusted:!1})}},!1,p))),_(()=>{h.forEach(y=>y())})}function dt(t){const e=[];function r(n,o){if(ht("CSSGroupingRule")&&n.parentRule instanceof CSSGroupingRule||ht("CSSMediaRule")&&n.parentRule instanceof CSSMediaRule||ht("CSSSupportsRule")&&n.parentRule instanceof CSSSupportsRule||ht("CSSConditionRule")&&n.parentRule instanceof CSSConditionRule){const i=Array.from(n.parentRule.cssRules).indexOf(n);o.unshift(i)}else if(n.parentStyleSheet){const i=Array.from(n.parentStyleSheet.cssRules).indexOf(n);o.unshift(i)}return o}return r(t,e)}function Ie(t,e,r){let n,o;return t?(t.ownerNode?n=e.getId(t.ownerNode):o=r.getId(t),{styleId:o,id:n}):{}}function Qo({styleSheetRuleCb:t,mirror:e,stylesheetManager:r},{win:n}){if(!n.CSSStyleSheet||!n.CSSStyleSheet.prototype)return()=>{};const o=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:_((u,d,h)=>{const[p,m]=h,{id:g,styleId:y}=Ie(d,e,r.styleMirror);return(g&&g!==-1||y&&y!==-1)&&t({id:g,styleId:y,adds:[{rule:p,index:m}]}),u.apply(d,h)})});const i=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:_((u,d,h)=>{const[p]=h,{id:m,styleId:g}=Ie(d,e,r.styleMirror);return(m&&m!==-1||g&&g!==-1)&&t({id:m,styleId:g,removes:[{index:p}]}),u.apply(d,h)})});let a;n.CSSStyleSheet.prototype.replace&&(a=n.CSSStyleSheet.prototype.replace,n.CSSStyleSheet.prototype.replace=new Proxy(a,{apply:_((u,d,h)=>{const[p]=h,{id:m,styleId:g}=Ie(d,e,r.styleMirror);return(m&&m!==-1||g&&g!==-1)&&t({id:m,styleId:g,replace:p}),u.apply(d,h)})}));let l;n.CSSStyleSheet.prototype.replaceSync&&(l=n.CSSStyleSheet.prototype.replaceSync,n.CSSStyleSheet.prototype.replaceSync=new Proxy(l,{apply:_((u,d,h)=>{const[p]=h,{id:m,styleId:g}=Ie(d,e,r.styleMirror);return(m&&m!==-1||g&&g!==-1)&&t({id:m,styleId:g,replaceSync:p}),u.apply(d,h)})}));const s={};pt("CSSGroupingRule")?s.CSSGroupingRule=n.CSSGroupingRule:(pt("CSSMediaRule")&&(s.CSSMediaRule=n.CSSMediaRule),pt("CSSConditionRule")&&(s.CSSConditionRule=n.CSSConditionRule),pt("CSSSupportsRule")&&(s.CSSSupportsRule=n.CSSSupportsRule));const c={};return Object.entries(s).forEach(([u,d])=>{c[u]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(c[u].insertRule,{apply:_((h,p,m)=>{const[g,y]=m,{id:f,styleId:v}=Ie(p.parentStyleSheet,e,r.styleMirror);return(f&&f!==-1||v&&v!==-1)&&t({id:f,styleId:v,adds:[{rule:g,index:[...dt(p),y||0]}]}),h.apply(p,m)})}),d.prototype.deleteRule=new Proxy(c[u].deleteRule,{apply:_((h,p,m)=>{const[g]=m,{id:y,styleId:f}=Ie(p.parentStyleSheet,e,r.styleMirror);return(y&&y!==-1||f&&f!==-1)&&t({id:y,styleId:f,removes:[{index:[...dt(p),g]}]}),h.apply(p,m)})})}),_(()=>{n.CSSStyleSheet.prototype.insertRule=o,n.CSSStyleSheet.prototype.deleteRule=i,a&&(n.CSSStyleSheet.prototype.replace=a),l&&(n.CSSStyleSheet.prototype.replaceSync=l),Object.entries(s).forEach(([u,d])=>{d.prototype.insertRule=c[u].insertRule,d.prototype.deleteRule=c[u].deleteRule})})}function Yr({mirror:t,stylesheetManager:e},r){var n,o,i;let a=null;r.nodeName==="#document"?a=t.getId(r):a=t.getId(r.host);const l=r.nodeName==="#document"?(n=r.defaultView)==null?void 0:n.Document:(i=(o=r.ownerDocument)==null?void 0:o.defaultView)==null?void 0:i.ShadowRoot,s=Object.getOwnPropertyDescriptor(l?.prototype,"adoptedStyleSheets");return a===null||a===-1||!l||!s?()=>{}:(Object.defineProperty(r,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){var c;return(c=s.get)==null?void 0:c.call(this)},set(c){var u;const d=(u=s.set)==null?void 0:u.call(this,c);if(a!==null&&a!==-1)try{e.adoptStyleSheets(c,a)}catch{}return d}}),_(()=>{Object.defineProperty(r,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})}))}function qo({styleDeclarationCb:t,mirror:e,ignoreCSSAttributes:r,stylesheetManager:n},{win:o}){const i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:_((l,s,c)=>{var u;const[d,h,p]=c;if(r.has(d))return i.apply(s,[d,h,p]);const{id:m,styleId:g}=Ie((u=s.parentRule)==null?void 0:u.parentStyleSheet,e,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&t({id:m,styleId:g,set:{property:d,value:h,priority:p},index:dt(s.parentRule)}),l.apply(s,c)})});const a=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(a,{apply:_((l,s,c)=>{var u;const[d]=c;if(r.has(d))return a.apply(s,[d]);const{id:h,styleId:p}=Ie((u=s.parentRule)==null?void 0:u.parentStyleSheet,e,n.styleMirror);return(h&&h!==-1||p&&p!==-1)&&t({id:h,styleId:p,remove:{property:d},index:dt(s.parentRule)}),l.apply(s,c)})}),_(()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=a})}function ei({mediaInteractionCb:t,blockClass:e,blockSelector:r,mirror:n,sampling:o}){const i=_(l=>Pe(_(s=>{const c=qe(s);if(!c||le(c,e,r,!0))return;const{currentTime:u,volume:d,muted:h,playbackRate:p}=c;t({type:l,id:n.getId(c),currentTime:u,volume:d,muted:h,playbackRate:p})}),o.media||500)),a=[ae("play",i(Ee.Play)),ae("pause",i(Ee.Pause)),ae("seeked",i(Ee.Seeked)),ae("volumechange",i(Ee.VolumeChange)),ae("ratechange",i(Ee.RateChange))];return _(()=>{a.forEach(l=>l())})}function ti({fontCb:t,doc:e}){const r=e.defaultView;if(!r)return()=>{};const n=[],o=new WeakMap,i=r.FontFace;r.FontFace=function(l,s,c){const u=new i(l,s,c);return o.set(u,{family:l,buffer:typeof s!="string",descriptors:c,fontSource:typeof s=="string"?s:JSON.stringify(Array.from(new Uint8Array(s)))}),u};const a=Re(e.fonts,"add",function(l){return function(s){return setTimeout(_(()=>{const c=o.get(s);c&&(t(c),o.delete(s))}),0),l.apply(this,[s])}});return n.push(()=>{r.FontFace=i}),n.push(a),_(()=>{n.forEach(l=>l())})}function ri(t){const{doc:e,mirror:r,blockClass:n,blockSelector:o,selectionCb:i}=t;let a=!0;const l=_(()=>{const s=e.getSelection();if(!s||a&&s?.isCollapsed)return;a=s.isCollapsed||!1;const c=[],u=s.rangeCount||0;for(let d=0;d<u;d++){const h=s.getRangeAt(d),{startContainer:p,startOffset:m,endContainer:g,endOffset:y}=h;le(p,n,o,!0)||le(g,n,o,!0)||c.push({start:r.getId(p),startOffset:m,end:r.getId(g),endOffset:y})}i({ranges:c})});return l(),ae("selectionchange",l)}function ni(t,e){const{mutationCb:r,mousemoveCb:n,mouseInteractionCb:o,scrollCb:i,viewportResizeCb:a,inputCb:l,mediaInteractionCb:s,styleSheetRuleCb:c,styleDeclarationCb:u,canvasMutationCb:d,fontCb:h,selectionCb:p}=t;t.mutationCb=(...m)=>{e.mutation&&e.mutation(...m),r(...m)},t.mousemoveCb=(...m)=>{e.mousemove&&e.mousemove(...m),n(...m)},t.mouseInteractionCb=(...m)=>{e.mouseInteraction&&e.mouseInteraction(...m),o(...m)},t.scrollCb=(...m)=>{e.scroll&&e.scroll(...m),i(...m)},t.viewportResizeCb=(...m)=>{e.viewportResize&&e.viewportResize(...m),a(...m)},t.inputCb=(...m)=>{e.input&&e.input(...m),l(...m)},t.mediaInteractionCb=(...m)=>{e.mediaInteaction&&e.mediaInteaction(...m),s(...m)},t.styleSheetRuleCb=(...m)=>{e.styleSheetRule&&e.styleSheetRule(...m),c(...m)},t.styleDeclarationCb=(...m)=>{e.styleDeclaration&&e.styleDeclaration(...m),u(...m)},t.canvasMutationCb=(...m)=>{e.canvasMutation&&e.canvasMutation(...m),d(...m)},t.fontCb=(...m)=>{e.font&&e.font(...m),h(...m)},t.selectionCb=(...m)=>{e.selection&&e.selection(...m),p(...m)}}function oi(t,e={}){const r=t.doc.defaultView;if(!r)return()=>{};ni(t,e);const n=Br(t,t.doc),o=Yo(t),i=Xo(t),a=Gr(t),l=Zo(t),s=Jo(t),c=ei(t),u=Qo(t,{win:r}),d=Yr(t,t.doc),h=qo(t,{win:r}),p=t.collectFonts?ti(t):()=>{},m=ri(t),g=[];for(const y of t.plugins)g.push(y.observer(y.callback,r,y.options));return _(()=>{xe.forEach(y=>y.reset()),n.disconnect(),o(),i(),a(),l(),s(),c(),u(),d(),h(),p(),m(),g.forEach(y=>y())})}function ht(t){return typeof window[t]<"u"}function pt(t){return Boolean(typeof window[t]<"u"&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}class Xr{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,r,n,o){const i=n||this.getIdToRemoteIdMap(e),a=o||this.getRemoteIdToIdMap(e);let l=i.get(r);return l||(l=this.generateIdFn(),i.set(r,l),a.set(l,r)),l}getIds(e,r){const n=this.getIdToRemoteIdMap(e),o=this.getRemoteIdToIdMap(e);return r.map(i=>this.getId(e,i,n,o))}getRemoteId(e,r,n){const o=n||this.getRemoteIdToIdMap(e);return typeof r!="number"?r:o.get(r)||-1}getRemoteIds(e,r){const n=this.getRemoteIdToIdMap(e);return r.map(o=>this.getRemoteId(e,o,n))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let r=this.iframeIdToRemoteIdMap.get(e);return r||(r=new Map,this.iframeIdToRemoteIdMap.set(e,r)),r}getRemoteIdToIdMap(e){let r=this.iframeRemoteIdToIdMap.get(e);return r||(r=new Map,this.iframeRemoteIdToIdMap.set(e,r)),r}}class ii{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Xr(br),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Xr(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,r){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:r}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(n=this.loadListener)==null||n.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const r=e;if(r.data.type!=="rrweb"||r.origin!==r.data.origin||!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const o=this.transformCrossOriginEvent(n,r.data.event);o&&this.wrappedEmit(o,r.data.isCheckout)}transformCrossOriginEvent(e,r){var n;switch(r.type){case k.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(r.data.node,e);const o=r.data.node.id;return this.crossOriginIframeRootIdMap.set(e,o),this.patchRootIdOnNode(r.data.node,o),{timestamp:r.timestamp,type:k.IncrementalSnapshot,data:{source:N.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:r.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case k.Meta:case k.Load:case k.DomContentLoaded:return!1;case k.Plugin:return r;case k.Custom:return this.replaceIds(r.data.payload,e,["id","parentId","previousId","nextId"]),r;case k.IncrementalSnapshot:switch(r.data.source){case N.Mutation:return r.data.adds.forEach(o=>{this.replaceIds(o,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(o.node,e);const i=this.crossOriginIframeRootIdMap.get(e);i&&this.patchRootIdOnNode(o.node,i)}),r.data.removes.forEach(o=>{this.replaceIds(o,e,["parentId","id"])}),r.data.attributes.forEach(o=>{this.replaceIds(o,e,["id"])}),r.data.texts.forEach(o=>{this.replaceIds(o,e,["id"])}),r;case N.Drag:case N.TouchMove:case N.MouseMove:return r.data.positions.forEach(o=>{this.replaceIds(o,e,["id"])}),r;case N.ViewportResize:return!1;case N.MediaInteraction:case N.MouseInteraction:case N.Scroll:case N.CanvasMutation:case N.Input:return this.replaceIds(r.data,e,["id"]),r;case N.StyleSheetRule:case N.StyleDeclaration:return this.replaceIds(r.data,e,["id"]),this.replaceStyleIds(r.data,e,["styleId"]),r;case N.Font:return r;case N.Selection:return r.data.ranges.forEach(o=>{this.replaceIds(o,e,["start","end"])}),r;case N.AdoptedStyleSheet:return this.replaceIds(r.data,e,["id"]),this.replaceStyleIds(r.data,e,["styleIds"]),(n=r.data.styles)==null||n.forEach(o=>{this.replaceStyleIds(o,e,["styleId"])}),r}}}replace(e,r,n,o){for(const i of o)!Array.isArray(r[i])&&typeof r[i]!="number"||(Array.isArray(r[i])?r[i]=e.getIds(n,r[i]):r[i]=e.getId(n,r[i]));return r}replaceIds(e,r,n){return this.replace(this.crossOriginIframeMirror,e,r,n)}replaceStyleIds(e,r,n){return this.replace(this.crossOriginIframeStyleMirror,e,r,n)}replaceIdOnNode(e,r){this.replaceIds(e,r,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(n=>{this.replaceIdOnNode(n,r)})}patchRootIdOnNode(e,r){e.type!==x.Document&&!e.rootId&&(e.rootId=r),"childNodes"in e&&e.childNodes.forEach(n=>{this.patchRootIdOnNode(n,r)})}}var si=Object.defineProperty,ai=Object.defineProperties,li=Object.getOwnPropertyDescriptors,Zr=Object.getOwnPropertySymbols,ci=Object.prototype.hasOwnProperty,ui=Object.prototype.propertyIsEnumerable,Kr=(t,e,r)=>e in t?si(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Jr=(t,e)=>{for(var r in e||(e={}))ci.call(e,r)&&Kr(t,r,e[r]);if(Zr)for(var r of Zr(e))ui.call(e,r)&&Kr(t,r,e[r]);return t},Qr=(t,e)=>ai(t,li(e));class di{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,r){if(!Xe(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=Br(Qr(Jr({},this.bypassOptions),{doc:r,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(()=>n.disconnect()),this.restoreHandlers.push(Gr(Qr(Jr({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Yr({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){!e.contentWindow||!e.contentDocument||this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,r){const n=this;this.restoreHandlers.push(Re(e.prototype,"attachShadow",function(o){return function(i){const a=o.call(this,i);return this.shadowRoot&&Vt(this)&&n.addShadowRoot(this.shadowRoot,r),a}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var Ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",et=typeof Uint8Array>"u"?[]:new Uint8Array(256),mt=0;mt<Ue.length;mt++)et[Ue.charCodeAt(mt)]=mt;var hi=function(t){var e=new Uint8Array(t),r,n=e.length,o="";for(r=0;r<n;r+=3)o+=Ue[e[r]>>2],o+=Ue[(e[r]&3)<<4|e[r+1]>>4],o+=Ue[(e[r+1]&15)<<2|e[r+2]>>6],o+=Ue[e[r+2]&63];return n%3===2?o=o.substring(0,o.length-1)+"=":n%3===1&&(o=o.substring(0,o.length-2)+"=="),o},pi=function(t){var e=t.length*.75,r=t.length,n,o=0,i,a,l,s;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=new ArrayBuffer(e),u=new Uint8Array(c);for(n=0;n<r;n+=4)i=et[t.charCodeAt(n)],a=et[t.charCodeAt(n+1)],l=et[t.charCodeAt(n+2)],s=et[t.charCodeAt(n+3)],u[o++]=i<<2|a>>4,u[o++]=(a&15)<<4|l>>2,u[o++]=(l&3)<<6|s&63;return c};const qr=new Map;function mi(t,e){let r=qr.get(t);return r||(r=new Map,qr.set(t,r)),r.has(e)||r.set(e,[]),r.get(e)}const en=(t,e,r)=>{if(!t||!(rn(t,e)||typeof t=="object"))return;const n=t.constructor.name,o=mi(r,n);let i=o.indexOf(t);return i===-1&&(i=o.length,o.push(t)),i};function ft(t,e,r){if(t instanceof Array)return t.map(n=>ft(n,e,r));if(t===null)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray)return{rr_type:t.constructor.name,args:[Object.values(t)]};if(t instanceof ArrayBuffer){const n=t.constructor.name,o=hi(t);return{rr_type:n,base64:o}}else{if(t instanceof DataView)return{rr_type:t.constructor.name,args:[ft(t.buffer,e,r),t.byteOffset,t.byteLength]};if(t instanceof HTMLImageElement){const n=t.constructor.name,{src:o}=t;return{rr_type:n,src:o}}else if(t instanceof HTMLCanvasElement){const n="HTMLImageElement",o=t.toDataURL();return{rr_type:n,src:o}}else{if(t instanceof ImageData)return{rr_type:t.constructor.name,args:[ft(t.data,e,r),t.width,t.height]};if(rn(t,e)||typeof t=="object"){const n=t.constructor.name,o=en(t,e,r);return{rr_type:n,index:o}}}}return t}const tn=(t,e,r)=>[...t].map(n=>ft(n,e,r)),rn=(t,e)=>{const r=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(n=>typeof e[n]=="function");return Boolean(r.find(n=>t instanceof e[n]))};function fi(t,e,r,n){const o=[],i=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(const a of i)try{if(typeof e.CanvasRenderingContext2D.prototype[a]!="function")continue;const l=Re(e.CanvasRenderingContext2D.prototype,a,function(s){return function(...c){return le(this.canvas,r,n,!0)||setTimeout(()=>{const u=tn([...c],e,this);t(this.canvas,{type:Ce["2D"],property:a,args:u})},0),s.apply(this,c)}});o.push(l)}catch{const s=Je(e.CanvasRenderingContext2D.prototype,a,{set(c){t(this.canvas,{type:Ce["2D"],property:a,args:[c],setter:!0})}});o.push(s)}return()=>{o.forEach(a=>a())}}function nn(t,e,r){const n=[];try{const o=Re(t.HTMLCanvasElement.prototype,"getContext",function(i){return function(a,...l){return le(this,e,r,!0)||"__context"in this||(this.__context=a),i.apply(this,[a,...l])}});n.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{n.forEach(o=>o())}}function on(t,e,r,n,o,i,a){const l=[],s=Object.getOwnPropertyNames(t);for(const c of s)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(c))try{if(typeof t[c]!="function")continue;const u=Re(t,c,function(d){return function(...h){const p=d.apply(this,h);if(en(p,a,this),!le(this.canvas,n,o,!0)){const m=tn([...h],a,this),g={type:e,property:c,args:m};r(this.canvas,g)}return p}});l.push(u)}catch{const d=Je(t,c,{set(h){r(this.canvas,{type:e,property:c,args:[h],setter:!0})}});l.push(d)}return l}function gi(t,e,r,n,o){const i=[];return i.push(...on(e.WebGLRenderingContext.prototype,Ce.WebGL,t,r,n,o,e)),typeof e.WebGL2RenderingContext<"u"&&i.push(...on(e.WebGL2RenderingContext.prototype,Ce.WebGL2,t,r,n,o,e)),()=>{i.forEach(a=>a())}}function yi(t,e){var r=atob(t);if(e){for(var n=new Uint8Array(r.length),o=0,i=r.length;o<i;++o)n[o]=r.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return r}function vi(t,e,r){var n=e===void 0?null:e,o=r===void 0?!1:r,i=yi(t,o),a=i.indexOf(`
`,10)+1,l=i.substring(a)+(n?"//# sourceMappingURL="+n:""),s=new Blob([l],{type:"application/javascript"});return URL.createObjectURL(s)}function Si(t,e,r){var n;return function(i){return n=n||vi(t,e,r),new Worker(n,i)}}var bi=Si("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Zm9yKHZhciByPSJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvIixwPXR5cGVvZiBVaW50OEFycmF5PiJ1Ij9bXTpuZXcgVWludDhBcnJheSgyNTYpLGY9MDtmPHIubGVuZ3RoO2YrKylwW3IuY2hhckNvZGVBdChmKV09Zjt2YXIgdT1mdW5jdGlvbihzKXt2YXIgZT1uZXcgVWludDhBcnJheShzKSxuLGE9ZS5sZW5ndGgsdD0iIjtmb3Iobj0wO248YTtuKz0zKXQrPXJbZVtuXT4+Ml0sdCs9clsoZVtuXSYzKTw8NHxlW24rMV0+PjRdLHQrPXJbKGVbbisxXSYxNSk8PDJ8ZVtuKzJdPj42XSx0Kz1yW2VbbisyXSY2M107cmV0dXJuIGElMz09PTI/dD10LnN1YnN0cmluZygwLHQubGVuZ3RoLTEpKyI9IjphJTM9PT0xJiYodD10LnN1YnN0cmluZygwLHQubGVuZ3RoLTIpKyI9PSIpLHR9O2NvbnN0IGM9bmV3IE1hcCxsPW5ldyBNYXA7YXN5bmMgZnVuY3Rpb24gdihzLGUsbil7Y29uc3QgYT1gJHtzfS0ke2V9YDtpZigiT2Zmc2NyZWVuQ2FudmFzImluIGdsb2JhbFRoaXMpe2lmKGwuaGFzKGEpKXJldHVybiBsLmdldChhKTtjb25zdCB0PW5ldyBPZmZzY3JlZW5DYW52YXMocyxlKTt0LmdldENvbnRleHQoIjJkIik7Y29uc3QgZz1hd2FpdChhd2FpdCB0LmNvbnZlcnRUb0Jsb2IobikpLmFycmF5QnVmZmVyKCksZD11KGcpO3JldHVybiBsLnNldChhLGQpLGR9ZWxzZSByZXR1cm4iIn1jb25zdCBpPXNlbGY7aS5vbm1lc3NhZ2U9YXN5bmMgZnVuY3Rpb24ocyl7aWYoIk9mZnNjcmVlbkNhbnZhcyJpbiBnbG9iYWxUaGlzKXtjb25zdHtpZDplLGJpdG1hcDpuLHdpZHRoOmEsaGVpZ2h0OnQsZGF0YVVSTE9wdGlvbnM6Z309cy5kYXRhLGQ9dihhLHQsZyksaD1uZXcgT2Zmc2NyZWVuQ2FudmFzKGEsdCk7aC5nZXRDb250ZXh0KCIyZCIpLmRyYXdJbWFnZShuLDAsMCksbi5jbG9zZSgpO2NvbnN0IHc9YXdhaXQgaC5jb252ZXJ0VG9CbG9iKGcpLHk9dy50eXBlLGI9YXdhaXQgdy5hcnJheUJ1ZmZlcigpLG89dShiKTtpZighYy5oYXMoZSkmJmF3YWl0IGQ9PT1vKXJldHVybiBjLnNldChlLG8pLGkucG9zdE1lc3NhZ2Uoe2lkOmV9KTtpZihjLmdldChlKT09PW8pcmV0dXJuIGkucG9zdE1lc3NhZ2Uoe2lkOmV9KTtpLnBvc3RNZXNzYWdlKHtpZDplLHR5cGU6eSxiYXNlNjQ6byx3aWR0aDphLGhlaWdodDp0fSksYy5zZXQoZSxvKX1lbHNlIHJldHVybiBpLnBvc3RNZXNzYWdlKHtpZDpzLmRhdGEuaWR9KX19KSgpOwoK",null,!1),sn=Object.getOwnPropertySymbols,wi=Object.prototype.hasOwnProperty,Ci=Object.prototype.propertyIsEnumerable,Ei=(t,e)=>{var r={};for(var n in t)wi.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&sn)for(var n of sn(t))e.indexOf(n)<0&&Ci.call(t,n)&&(r[n]=t[n]);return r},Ni=(t,e,r)=>new Promise((n,o)=>{var i=s=>{try{l(r.next(s))}catch(c){o(c)}},a=s=>{try{l(r.throw(s))}catch(c){o(c)}},l=s=>s.done?n(s.value):Promise.resolve(s.value).then(i,a);l((r=r.apply(t,e)).next())});class Ti{constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(s,c)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(s)||this.pendingCanvasMutations.set(s,[]),this.pendingCanvasMutations.get(s).push(c)};const{sampling:r="all",win:n,blockClass:o,blockSelector:i,recordCanvas:a,dataURLOptions:l}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,a&&r==="all"&&this.initCanvasMutationObserver(n,o,i),a&&typeof r=="number"&&this.initCanvasFPSObserver(r,n,o,i,{dataURLOptions:l})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(e,r,n,o,i){const a=nn(r,n,o),l=new Map,s=new bi;s.onmessage=m=>{const{id:g}=m.data;if(l.set(g,!1),!("base64"in m.data))return;const{base64:y,type:f,width:v,height:S}=m.data;this.mutationCb({id:g,type:Ce["2D"],commands:[{property:"clearRect",args:[0,0,v,S]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:y}],type:f}]},0,0]}]})};const c=1e3/e;let u=0,d;const h=()=>{const m=[];return r.document.querySelectorAll("canvas").forEach(g=>{le(g,n,o,!0)||m.push(g)}),m},p=m=>{if(u&&m-u<c){d=requestAnimationFrame(p);return}u=m,h().forEach(g=>Ni(this,null,function*(){var y;const f=this.mirror.getId(g);if(l.get(f))return;if(l.set(f,!0),["webgl","webgl2"].includes(g.__context)){const S=g.getContext(g.__context);((y=S?.getContextAttributes())==null?void 0:y.preserveDrawingBuffer)===!1&&S?.clear(S.COLOR_BUFFER_BIT)}const v=yield createImageBitmap(g);s.postMessage({id:f,bitmap:v,width:g.width,height:g.height,dataURLOptions:i.dataURLOptions},[v])})),d=requestAnimationFrame(p)};d=requestAnimationFrame(p),this.resetObservers=()=>{a(),cancelAnimationFrame(d)}}initCanvasMutationObserver(e,r,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=nn(e,r,n),i=fi(this.processMutation.bind(this),e,r,n),a=gi(this.processMutation.bind(this),e,r,n,this.mirror);this.resetObservers=()=>{o(),i(),a()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const e=r=>{this.rafStamps.latestId=r,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,r)=>{const n=this.mirror.getId(r);this.flushPendingCanvasMutationFor(r,n)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,r){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||r===-1)return;const o=n.map(a=>Ei(a,["type"])),{type:i}=n[0];this.mutationCb({id:r,type:i,commands:o}),this.pendingCanvasMutations.delete(e)}}class Mi{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new Ut,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,r){"_cssText"in r.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:r.id,attributes:r.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,r){if(e.length===0)return;const n={id:r,styleIds:[]},o=[];for(const i of e){let a;if(this.styleMirror.has(i))a=this.styleMirror.getId(i);else{a=this.styleMirror.add(i);const l=Array.from(i.rules||CSSRule);o.push({styleId:a,rules:l.map((s,c)=>({rule:yr(s),index:c}))})}n.styleIds.push(a)}o.length>0&&(n.styles=o),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class Ii{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(e,r){const n=this.nodeMap.get(e);return n&&Array.from(n).some(o=>o!==r)}add(e,r){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(r))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}var ki=Object.defineProperty,Di=Object.defineProperties,Oi=Object.getOwnPropertyDescriptors,an=Object.getOwnPropertySymbols,Ri=Object.prototype.hasOwnProperty,xi=Object.prototype.propertyIsEnumerable,ln=(t,e,r)=>e in t?ki(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,he=(t,e)=>{for(var r in e||(e={}))Ri.call(e,r)&&ln(t,r,e[r]);if(an)for(var r of an(e))xi.call(e,r)&&ln(t,r,e[r]);return t},Li=(t,e)=>Di(t,Oi(e));function oe(t){return Li(he({},t),{timestamp:Date.now()})}let re,gt,zt,yt=!1;const fe=vr();function Le(t={}){const{emit:e,checkoutEveryNms:r,checkoutEveryNth:n,blockClass:o="rr-block",blockSelector:i=null,ignoreClass:a="rr-ignore",maskTextClass:l="rr-mask",maskTextSelector:s=null,inlineStylesheet:c=!0,maskAllInputs:u,maskInputOptions:d,slimDOMOptions:h,maskInputFn:p,maskTextFn:m,hooks:g,packFn:y,sampling:f={},dataURLOptions:v={},mousemoveWait:S,recordCanvas:E=!1,recordCrossOriginIframes:I=!1,recordAfter:M=t.recordAfter==="DOMContentLoaded"?t.recordAfter:"load",userTriggeredOnInput:L=!1,collectFonts:C=!1,inlineImages:Y=!1,plugins:W,keepIframeSrcFn:q=()=>!1,ignoreCSSAttributes:U=new Set([]),errorHandler:V}=t;Wo(V);const B=I?window.parent===window:!0;let A=!1;if(!B)try{window.parent.document&&(A=!1)}catch{A=!0}if(B&&!e)throw new Error("emit function is required");S!==void 0&&f.mousemove===void 0&&(f.mousemove=S),fe.reset();const F=u===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:d!==void 0?d:{password:!0},O=h===!0||h==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:h==="all",headMetaDescKeywords:h==="all"}:h||{};Ft();let G,w=0;const b=R=>{for(const ie of W||[])ie.eventProcessor&&(R=ie.eventProcessor(R));return y&&!A&&(R=y(R)),R};re=(R,ie)=>{var H;if(((H=xe[0])==null?void 0:H.isFrozen())&&R.type!==k.FullSnapshot&&!(R.type===k.IncrementalSnapshot&&R.data.source===N.Mutation)&&xe.forEach(Q=>Q.unfreeze()),B)e?.(b(R),ie);else if(A){const Q={type:"rrweb",event:b(R),origin:window.location.origin,isCheckout:ie};window.parent.postMessage(Q,"*")}if(R.type===k.FullSnapshot)G=R,w=0;else if(R.type===k.IncrementalSnapshot){if(R.data.source===N.Mutation&&R.data.isAttachIframe)return;w++;const Q=n&&w>=n,Te=r&&R.timestamp-G.timestamp>r;(Q||Te)&&gt(!0)}};const T=R=>{re(oe({type:k.IncrementalSnapshot,data:he({source:N.Mutation},R)}))},D=R=>re(oe({type:k.IncrementalSnapshot,data:he({source:N.Scroll},R)})),z=R=>re(oe({type:k.IncrementalSnapshot,data:he({source:N.CanvasMutation},R)})),ee=R=>re(oe({type:k.IncrementalSnapshot,data:he({source:N.AdoptedStyleSheet},R)})),X=new Mi({mutationCb:T,adoptedStyleSheetCb:ee}),ce=new ii({mirror:fe,mutationCb:T,stylesheetManager:X,recordCrossOriginIframes:I,wrappedEmit:re});for(const R of W||[])R.getMirror&&R.getMirror({nodeMirror:fe,crossOriginIframeMirror:ce.crossOriginIframeMirror,crossOriginIframeStyleMirror:ce.crossOriginIframeStyleMirror});const me=new Ii;zt=new Ti({recordCanvas:E,mutationCb:z,win:window,blockClass:o,blockSelector:i,mirror:fe,sampling:f.canvas,dataURLOptions:v});const de=new di({mutationCb:T,scrollCb:D,bypassOptions:{blockClass:o,blockSelector:i,maskTextClass:l,maskTextSelector:s,inlineStylesheet:c,maskInputOptions:F,dataURLOptions:v,maskTextFn:m,maskInputFn:p,recordCanvas:E,inlineImages:Y,sampling:f,slimDOMOptions:O,iframeManager:ce,stylesheetManager:X,canvasManager:zt,keepIframeSrcFn:q,processedNodeManager:me},mirror:fe});gt=(R=!1)=>{re(oe({type:k.Meta,data:{href:window.location.href,width:Lt(),height:xt()}}),R),X.reset(),de.init(),xe.forEach(H=>H.lock());const ie=Io(document,{mirror:fe,blockClass:o,blockSelector:i,maskTextClass:l,maskTextSelector:s,inlineStylesheet:c,maskAllInputs:F,maskTextFn:m,slimDOM:O,dataURLOptions:v,recordCanvas:E,inlineImages:Y,onSerialize:H=>{$e(H,fe)&&ce.addIframe(H),Pt(H,fe)&&X.trackLinkElement(H),Me(H)&&de.addShadowRoot(H.shadowRoot,document)},onIframeLoad:(H,Q)=>{ce.attachIframe(H,Q),de.observeAttachShadow(H)},onStylesheetLoad:(H,Q)=>{X.attachLinkElement(H,Q)},keepIframeSrcFn:q});if(!ie)return console.warn("Failed to snapshot the document");re(oe({type:k.FullSnapshot,data:{node:ie,initialOffset:Rt(window)}}),R),xe.forEach(H=>H.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&X.adoptStyleSheets(document.adoptedStyleSheets,fe.getId(document))};try{const R=[],ie=Q=>{var Te;return _(oi)({mutationCb:T,mousemoveCb:(Z,fr)=>re(oe({type:k.IncrementalSnapshot,data:{source:fr,positions:Z}})),mouseInteractionCb:Z=>re(oe({type:k.IncrementalSnapshot,data:he({source:N.MouseInteraction},Z)})),scrollCb:D,viewportResizeCb:Z=>re(oe({type:k.IncrementalSnapshot,data:he({source:N.ViewportResize},Z)})),inputCb:Z=>re(oe({type:k.IncrementalSnapshot,data:he({source:N.Input},Z)})),mediaInteractionCb:Z=>re(oe({type:k.IncrementalSnapshot,data:he({source:N.MediaInteraction},Z)})),styleSheetRuleCb:Z=>re(oe({type:k.IncrementalSnapshot,data:he({source:N.StyleSheetRule},Z)})),styleDeclarationCb:Z=>re(oe({type:k.IncrementalSnapshot,data:he({source:N.StyleDeclaration},Z)})),canvasMutationCb:z,fontCb:Z=>re(oe({type:k.IncrementalSnapshot,data:he({source:N.Font},Z)})),selectionCb:Z=>{re(oe({type:k.IncrementalSnapshot,data:he({source:N.Selection},Z)}))},blockClass:o,ignoreClass:a,maskTextClass:l,maskTextSelector:s,maskInputOptions:F,inlineStylesheet:c,sampling:f,recordCanvas:E,inlineImages:Y,userTriggeredOnInput:L,collectFonts:C,doc:Q,maskInputFn:p,maskTextFn:m,keepIframeSrcFn:q,blockSelector:i,slimDOMOptions:O,dataURLOptions:v,mirror:fe,iframeManager:ce,stylesheetManager:X,shadowDomManager:de,processedNodeManager:me,canvasManager:zt,ignoreCSSAttributes:U,plugins:((Te=W?.filter(Z=>Z.observer))==null?void 0:Te.map(Z=>({observer:Z.observer,options:Z.options,callback:fr=>re(oe({type:k.Plugin,data:{plugin:Z.name,payload:fr}}))})))||[]},g)};ce.addLoadListener(Q=>{try{R.push(ie(Q.contentDocument))}catch(Te){console.warn(Te)}});const H=()=>{gt(),R.push(ie(document)),yt=!0};return document.readyState==="interactive"||document.readyState==="complete"?H():(R.push(ae("DOMContentLoaded",()=>{re(oe({type:k.DomContentLoaded,data:{}})),M==="DOMContentLoaded"&&H()})),R.push(ae("load",()=>{re(oe({type:k.Load,data:{}})),M==="load"&&H()},window))),()=>{R.forEach(Q=>Q()),me.destroy(),yt=!1,Uo()}}catch(R){console.warn(R)}}Le.addCustomEvent=(t,e)=>{if(!yt)throw new Error("please add custom event after start recording");re(oe({type:k.Custom,data:{tag:t,payload:e}}))},Le.freezePage=()=>{xe.forEach(t=>t.freeze())},Le.takeFullSnapshot=t=>{if(!yt)throw new Error("please take full snapshot after start recording");gt(t)},Le.mirror=fe;var P;(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(P||(P={}));var Ai=function(){function t(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return t.prototype.getId=function(e){var r;if(!e)return-1;var n=(r=this.getMeta(e))===null||r===void 0?void 0:r.id;return n??-1},t.prototype.getNode=function(e){return this.idNodeMap.get(e)||null},t.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},t.prototype.getMeta=function(e){return this.nodeMetaMap.get(e)||null},t.prototype.removeNodeFromMap=function(e){var r=this,n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach(function(o){return r.removeNodeFromMap(o)})},t.prototype.has=function(e){return this.idNodeMap.has(e)},t.prototype.hasNode=function(e){return this.nodeMetaMap.has(e)},t.prototype.add=function(e,r){var n=r.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,r)},t.prototype.replace=function(e,r){var n=this.getNode(e);if(n){var o=this.nodeMetaMap.get(n);o&&this.nodeMetaMap.set(r,o)}this.idNodeMap.set(e,r)},t.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},t}();function Fi(){return new Ai}function _i(t){const e={},r=/;(?![^(]*\))/g,n=/:(.+)/,o=/\/\*.*?\*\//g;return t.replace(o,"").split(r).forEach(function(i){if(i){const a=i.split(n);a.length>1&&(e[Ht(a[0].trim())]=a[1].trim())}}),e}function cn(t){const e=[];for(const r in t){const n=t[r];if(typeof n!="string")continue;const o=Ui(r);e.push(`${o}: ${n};`)}return e.join(" ")}const Pi=/-([a-z])/g,$i=/^--[a-zA-Z0-9-]+$/,Ht=t=>$i.test(t)?t:t.replace(Pi,(e,r)=>r?r.toUpperCase():""),Wi=/\B([A-Z])/g,Ui=t=>t.replace(Wi,"-$1").toLowerCase();class pe{constructor(...e){this.parentElement=null,this.parentNode=null,this.firstChild=null,this.lastChild=null,this.previousSibling=null,this.nextSibling=null,this.ELEMENT_NODE=te.ELEMENT_NODE,this.TEXT_NODE=te.TEXT_NODE}get childNodes(){const e=[];let r=this.firstChild;for(;r;)e.push(r),r=r.nextSibling;return e}contains(e){if(e instanceof pe){if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0}else return!1;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,r){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}function ji(t){return class eo extends t{constructor(...r){super(r),this.nodeType=te.DOCUMENT_NODE,this.nodeName="#document",this.compatMode="CSS1Compat",this.RRNodeType=P.Document,this.textContent=null,this.ownerDocument=this}get documentElement(){return this.childNodes.find(r=>r.RRNodeType===P.Element&&r.tagName==="HTML")||null}get body(){var r;return((r=this.documentElement)===null||r===void 0?void 0:r.childNodes.find(n=>n.RRNodeType===P.Element&&n.tagName==="BODY"))||null}get head(){var r;return((r=this.documentElement)===null||r===void 0?void 0:r.childNodes.find(n=>n.RRNodeType===P.Element&&n.tagName==="HEAD"))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(r){const n=r.RRNodeType;if((n===P.Element||n===P.DocumentType)&&this.childNodes.some(i=>i.RRNodeType===n))throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${n===P.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);const o=Yt(this,r);return o.parentElement=null,o}insertBefore(r,n){const o=r.RRNodeType;if((o===P.Element||o===P.DocumentType)&&this.childNodes.some(a=>a.RRNodeType===o))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${o===P.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);const i=fn(this,r,n);return i.parentElement=null,i}removeChild(r){return gn(this,r)}open(){this.firstChild=null,this.lastChild=null}close(){}write(r){let n;if(r==='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'?n="-//W3C//DTD XHTML 1.0 Transitional//EN":r==='<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'&&(n="-//W3C//DTD HTML 4.0 Transitional//EN"),n){const o=this.createDocumentType("html",n,"");this.open(),this.appendChild(o)}}createDocument(r,n,o){return new eo}createDocumentType(r,n,o){const i=new(un(pe))(r,n,o);return i.ownerDocument=this,i}createElement(r){const n=new(dn(pe))(r);return n.ownerDocument=this,n}createElementNS(r,n){return this.createElement(n)}createTextNode(r){const n=new(hn(pe))(r);return n.ownerDocument=this,n}createComment(r){const n=new(pn(pe))(r);return n.ownerDocument=this,n}createCDATASection(r){const n=new(mn(pe))(r);return n.ownerDocument=this,n}toString(){return"RRDocument"}}}function un(t){return class extends t{constructor(e,r,n){super(),this.nodeType=te.DOCUMENT_TYPE_NODE,this.RRNodeType=P.DocumentType,this.name=e,this.publicId=r,this.systemId=n,this.nodeName=e,this.textContent=null}toString(){return"RRDocumentType"}}}function dn(t){return class extends t{constructor(e){super(),this.nodeType=te.ELEMENT_NODE,this.RRNodeType=P.Element,this.attributes={},this.shadowRoot=null,this.tagName=e.toUpperCase(),this.nodeName=e.toUpperCase()}get textContent(){let e="";return this.childNodes.forEach(r=>e+=r.textContent),e}set textContent(e){this.firstChild=null,this.lastChild=null,this.appendChild(this.ownerDocument.createTextNode(e))}get classList(){return new Bi(this.attributes.class,e=>{this.attributes.class=e})}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){const e=this.attributes.style?_i(this.attributes.style):{},r=/\B([A-Z])/g;return e.setProperty=(n,o,i)=>{if(r.test(n))return;const a=Ht(n);o?e[a]=o:delete e[a],i==="important"&&(e[a]+=" !important"),this.attributes.style=cn(e)},e.removeProperty=n=>{if(r.test(n))return"";const o=Ht(n),i=e[o]||"";return delete e[o],this.attributes.style=cn(e),i},e}getAttribute(e){return this.attributes[e]||null}setAttribute(e,r){this.attributes[e]=r}setAttributeNS(e,r,n){this.setAttribute(r,n)}removeAttribute(e){delete this.attributes[e]}appendChild(e){return Yt(this,e)}insertBefore(e,r){return fn(this,e,r)}removeChild(e){return gn(this,e)}attachShadow(e){const r=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=r,r}dispatchEvent(e){return!0}toString(){let e="";for(const r in this.attributes)e+=`${r}="${this.attributes[r]}" `;return`${this.tagName} ${e}`}}}function Vi(t){return class extends t{attachShadow(e){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}}}function hn(t){return class extends t{constructor(e){super(),this.nodeType=te.TEXT_NODE,this.nodeName="#text",this.RRNodeType=P.Text,this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRText text=${JSON.stringify(this.data)}`}}}function pn(t){return class extends t{constructor(e){super(),this.nodeType=te.COMMENT_NODE,this.nodeName="#comment",this.RRNodeType=P.Comment,this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRComment text=${JSON.stringify(this.data)}`}}}function mn(t){return class extends t{constructor(e){super(),this.nodeName="#cdata-section",this.nodeType=te.CDATA_SECTION_NODE,this.RRNodeType=P.CDATA,this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRCDATASection data=${JSON.stringify(this.data)}`}}}class Bi{constructor(e,r){if(this.classes=[],this.add=(...n)=>{for(const o of n){const i=String(o);this.classes.indexOf(i)>=0||this.classes.push(i)}this.onChange&&this.onChange(this.classes.join(" "))},this.remove=(...n)=>{this.classes=this.classes.filter(o=>n.indexOf(o)===-1),this.onChange&&this.onChange(this.classes.join(" "))},e){const n=e.trim().split(/\s+/);this.classes.push(...n)}this.onChange=r}}function Yt(t,e){return e.parentNode&&e.parentNode.removeChild(e),t.lastChild?(t.lastChild.nextSibling=e,e.previousSibling=t.lastChild):(t.firstChild=e,e.previousSibling=null),t.lastChild=e,e.nextSibling=null,e.parentNode=t,e.parentElement=t,e.ownerDocument=t.ownerDocument,e}function fn(t,e,r){if(!r)return Yt(t,e);if(r.parentNode!==t)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return e===r||(e.parentNode&&e.parentNode.removeChild(e),e.previousSibling=r.previousSibling,r.previousSibling=e,e.nextSibling=r,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,e.parentElement=t,e.parentNode=t,e.ownerDocument=t.ownerDocument),e}function gn(t,e){if(e.parentNode!==t)throw new Error("Failed to execute 'removeChild' on 'RRNode': The RRNode to be removed is not a child of this RRNode.");return e.previousSibling?e.previousSibling.nextSibling=e.nextSibling:t.firstChild=e.nextSibling,e.nextSibling?e.nextSibling.previousSibling=e.previousSibling:t.lastChild=e.previousSibling,e.previousSibling=null,e.nextSibling=null,e.parentElement=null,e.parentNode=null,e}var te;(function(t){t[t.PLACEHOLDER=0]="PLACEHOLDER",t[t.ELEMENT_NODE=1]="ELEMENT_NODE",t[t.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",t[t.TEXT_NODE=3]="TEXT_NODE",t[t.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",t[t.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",t[t.ENTITY_NODE=6]="ENTITY_NODE",t[t.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",t[t.COMMENT_NODE=8]="COMMENT_NODE",t[t.DOCUMENT_NODE=9]="DOCUMENT_NODE",t[t.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",t[t.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"})(te||(te={}));const Xt={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},Gi={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};let ye=null;function ve(t,e,r,n=e.mirror||e.ownerDocument.mirror){t=zi(t,e,r,n);const o=t.childNodes,i=e.childNodes;(o.length>0||i.length>0)&&yn(Array.from(o),i,t,r,n),Hi(t,e,r,n)}function zi(t,e,r,n){var o;if(r.afterAppend&&!ye&&(ye=new WeakSet,setTimeout(()=>{ye=null},0)),!Zt(t,e)){const i=vt(e,r.mirror,n);(o=t.parentNode)===null||o===void 0||o.replaceChild(i,t),t=i}switch(e.RRNodeType){case P.Document:{if(!je(t,e,r.mirror,n)){const i=n.getMeta(e);i&&(r.mirror.removeNodeFromMap(t),t.close(),t.open(),r.mirror.add(t,i),ye?.add(t))}break}case P.Element:{const i=t,a=e;switch(a.tagName){case"IFRAME":{const l=t.contentDocument;if(!l)break;ve(l,e.contentDocument,r,n);break}}if(a.shadowRoot){i.shadowRoot||i.attachShadow({mode:"open"});const l=i.shadowRoot.childNodes,s=a.shadowRoot.childNodes;(l.length>0||s.length>0)&&yn(Array.from(l),s,i.shadowRoot,r,n)}break}}return t}function Hi(t,e,r,n){var o;switch(e.RRNodeType){case P.Document:{const i=e.scrollData;i&&r.applyScroll(i,!0);break}case P.Element:{const i=t,a=e;switch(Yi(i,a,n),a.scrollData&&r.applyScroll(a.scrollData,!0),a.inputData&&r.applyInput(a.inputData),a.tagName){case"AUDIO":case"VIDEO":{const l=t,s=a;s.paused!==void 0&&(s.paused?l.pause():l.play()),s.muted!==void 0&&(l.muted=s.muted),s.volume!==void 0&&(l.volume=s.volume),s.currentTime!==void 0&&(l.currentTime=s.currentTime),s.playbackRate!==void 0&&(l.playbackRate=s.playbackRate);break}case"CANVAS":{const l=e;if(l.rr_dataURL!==null){const s=document.createElement("img");s.onload=()=>{const c=i.getContext("2d");c&&c.drawImage(s,0,0,s.width,s.height)},s.src=l.rr_dataURL}l.canvasMutations.forEach(s=>r.applyCanvas(s.event,s.mutation,t));break}case"STYLE":{const l=i.sheet;l&&e.rules.forEach(s=>r.applyStyleSheetMutation(s,l));break}}break}case P.Text:case P.Comment:case P.CDATA:{t.textContent!==e.data&&(t.textContent=e.data);break}}ye!=null&&ye.has(t)&&(ye.delete(t),(o=r.afterAppend)===null||o===void 0||o.call(r,t,r.mirror.getId(t)))}function Yi(t,e,r){const n=t.attributes,o=e.attributes;for(const i in o){const a=o[i],l=r.getMeta(e);if(l?.isSVG&&Xt[i])t.setAttributeNS(Xt[i],i,a);else if(e.tagName==="CANVAS"&&i==="rr_dataURL"){const s=document.createElement("img");s.src=a,s.onload=()=>{const c=t.getContext("2d");c&&c.drawImage(s,0,0,s.width,s.height)}}else t.setAttribute(i,a)}for(const{name:i}of Array.from(n))i in o||t.removeAttribute(i);e.scrollLeft&&(t.scrollLeft=e.scrollLeft),e.scrollTop&&(t.scrollTop=e.scrollTop)}function yn(t,e,r,n,o){let i=0,a=t.length-1,l=0,s=e.length-1,c=t[i],u=t[a],d=e[l],h=e[s],p,m;for(;i<=a&&l<=s;)if(c===void 0)c=t[++i];else if(u===void 0)u=t[--a];else if(je(c,d,n.mirror,o))ve(c,d,n,o),c=t[++i],d=e[++l];else if(je(u,h,n.mirror,o))ve(u,h,n,o),u=t[--a],h=e[--s];else if(je(c,h,n.mirror,o)){try{r.insertBefore(c,u.nextSibling)}catch(g){console.warn(g)}ve(c,h,n,o),c=t[++i],h=e[--s]}else if(je(u,d,n.mirror,o)){try{r.insertBefore(u,c)}catch(g){console.warn(g)}ve(u,d,n,o),u=t[--a],d=e[++l]}else{if(!p){p={};for(let y=i;y<=a;y++){const f=t[y];f&&n.mirror.hasNode(f)&&(p[n.mirror.getId(f)]=y)}}m=p[o.getId(d)];const g=t[m];if(m!==void 0&&g&&je(g,d,n.mirror,o)){try{r.insertBefore(g,c)}catch(y){console.warn(y)}ve(g,d,n,o),t[m]=void 0}else{const y=vt(d,n.mirror,o);r.nodeName==="#document"&&c&&(y.nodeType===y.DOCUMENT_TYPE_NODE&&c.nodeType===c.DOCUMENT_TYPE_NODE||y.nodeType===y.ELEMENT_NODE&&c.nodeType===c.ELEMENT_NODE)&&(r.removeChild(c),n.mirror.removeNodeFromMap(c),c=t[++i]);try{r.insertBefore(y,c||null),ve(y,d,n,o)}catch(f){console.warn(f)}}d=e[++l]}if(i>a){const g=e[s+1];let y=null;for(g&&(y=n.mirror.getNode(o.getId(g)));l<=s;++l){const f=vt(e[l],n.mirror,o);try{r.insertBefore(f,y),ve(f,e[l],n,o)}catch(v){console.warn(v)}}}else if(l>s)for(;i<=a;i++){const g=t[i];if(!(!g||g.parentNode!==r))try{r.removeChild(g),n.mirror.removeNodeFromMap(g)}catch(y){console.warn(y)}}}function vt(t,e,r){const n=r.getId(t),o=r.getMeta(t);let i=null;if(n>-1&&(i=e.getNode(n)),i!==null&&Zt(i,t))return i;switch(t.RRNodeType){case P.Document:i=new Document;break;case P.DocumentType:i=document.implementation.createDocumentType(t.name,t.publicId,t.systemId);break;case P.Element:{let a=t.tagName.toLowerCase();a=Gi[a]||a,o&&"isSVG"in o&&o?.isSVG?i=document.createElementNS(Xt.svg,a):i=document.createElement(t.tagName);break}case P.Text:i=document.createTextNode(t.data);break;case P.Comment:i=document.createComment(t.data);break;case P.CDATA:i=document.createCDATASection(t.data);break}o&&e.add(i,Object.assign({},o));try{ye?.add(i)}catch{}return i}function Zt(t,e){return t.nodeType!==e.nodeType?!1:t.nodeType!==t.ELEMENT_NODE||t.tagName.toUpperCase()===e.tagName}function je(t,e,r,n){const o=r.getId(t),i=n.getId(e);return o===-1||o!==i?!1:Zt(t,e)}class Ve extends ji(pe){constructor(e){super(),this.UNSERIALIZED_STARTING_ID=-2,this._unserializedId=this.UNSERIALIZED_STARTING_ID,this.mirror=os(),this.scrollData=null,e&&(this.mirror=e)}get unserializedId(){return this._unserializedId--}createDocument(e,r,n){return new Ve}createDocumentType(e,r,n){const o=new Xi(e,r,n);return o.ownerDocument=this,o}createElement(e){const r=e.toUpperCase();let n;switch(r){case"AUDIO":case"VIDEO":n=new Zi(r);break;case"IFRAME":n=new Qi(r,this.mirror);break;case"CANVAS":n=new Ki(r);break;case"STYLE":n=new Ji(r);break;default:n=new tt(r);break}return n.ownerDocument=this,n}createComment(e){const r=new es(e);return r.ownerDocument=this,r}createCDATASection(e){const r=new ts(e);return r.ownerDocument=this,r}createTextNode(e){const r=new qi(e);return r.ownerDocument=this,r}destroyTree(){this.firstChild=null,this.lastChild=null,this.mirror.reset()}open(){super.open(),this._unserializedId=this.UNSERIALIZED_STARTING_ID}}const Xi=un(pe);class tt extends dn(pe){constructor(){super(...arguments),this.inputData=null,this.scrollData=null}}class Zi extends Vi(tt){}class Ki extends tt{constructor(){super(...arguments),this.rr_dataURL=null,this.canvasMutations=[]}getContext(){return null}}class Ji extends tt{constructor(){super(...arguments),this.rules=[]}}class Qi extends tt{constructor(e,r){super(e),this.contentDocument=new Ve,this.contentDocument.mirror=r}}const qi=hn(pe),es=pn(pe),ts=mn(pe);function rs(t){return t instanceof HTMLFormElement?"FORM":t.tagName.toUpperCase()}function vn(t,e,r,n){let o;switch(t.nodeType){case te.DOCUMENT_NODE:n&&n.nodeName==="IFRAME"?o=n.contentDocument:(o=e,o.compatMode=t.compatMode);break;case te.DOCUMENT_TYPE_NODE:{const a=t;o=e.createDocumentType(a.name,a.publicId,a.systemId);break}case te.ELEMENT_NODE:{const a=t,l=rs(a);o=e.createElement(l);const s=o;for(const{name:c,value:u}of Array.from(a.attributes))s.attributes[c]=u;a.scrollLeft&&(s.scrollLeft=a.scrollLeft),a.scrollTop&&(s.scrollTop=a.scrollTop);break}case te.TEXT_NODE:o=e.createTextNode(t.textContent||"");break;case te.CDATA_SECTION_NODE:o=e.createCDATASection(t.data);break;case te.COMMENT_NODE:o=e.createComment(t.textContent||"");break;case te.DOCUMENT_FRAGMENT_NODE:o=n.attachShadow({mode:"open"});break;default:return null}let i=r.getMeta(t);return e instanceof Ve&&(i||(i=Sn(o,e.unserializedId),r.add(t,i)),e.mirror.add(o,Object.assign({},i))),o}function ns(t,e=Fi(),r=new Ve){function n(o,i){const a=vn(o,r,e,i);if(a!==null)if(i?.nodeName!=="IFRAME"&&o.nodeType!==te.DOCUMENT_FRAGMENT_NODE&&(i?.appendChild(a),a.parentNode=i,a.parentElement=i),o.nodeName==="IFRAME"){const l=o.contentDocument;l&&n(l,a)}else(o.nodeType===te.DOCUMENT_NODE||o.nodeType===te.ELEMENT_NODE||o.nodeType===te.DOCUMENT_FRAGMENT_NODE)&&(o.nodeType===te.ELEMENT_NODE&&o.shadowRoot&&n(o.shadowRoot,a),o.childNodes.forEach(l=>n(l,a)))}return n(t,null),r}function os(){return new is}class is{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){var r;if(!e)return-1;const n=(r=this.getMeta(e))===null||r===void 0?void 0:r.id;return n??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const r=this.getId(e);this.idNodeMap.delete(r),e.childNodes&&e.childNodes.forEach(n=>this.removeNodeFromMap(n))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,r){const n=r.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,r)}replace(e,r){const n=this.getNode(e);if(n){const o=this.nodeMetaMap.get(n);o&&this.nodeMetaMap.set(r,o)}this.idNodeMap.set(e,r)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Sn(t,e){switch(t.RRNodeType){case P.Document:return{id:e,type:t.RRNodeType,childNodes:[]};case P.DocumentType:{const r=t;return{id:e,type:t.RRNodeType,name:r.name,publicId:r.publicId,systemId:r.systemId}}case P.Element:return{id:e,type:t.RRNodeType,tagName:t.tagName.toLowerCase(),attributes:{},childNodes:[]};case P.Text:return{id:e,type:t.RRNodeType,textContent:t.textContent||""};case P.Comment:return{id:e,type:t.RRNodeType,textContent:t.textContent||""};case P.CDATA:return{id:e,type:t.RRNodeType,textContent:""}}}function bn(t){return{all:t=t||new Map,on:function(e,r){var n=t.get(e);n?n.push(r):t.set(e,[r])},off:function(e,r){var n=t.get(e);n&&(r?n.splice(n.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var n=t.get(e);n&&n.slice().map(function(o){o(r)}),(n=t.get("*"))&&n.slice().map(function(o){o(e,r)})}}}var ss=Object.freeze({__proto__:null,default:bn});function as(t=window,e=document){if("scrollBehavior"in e.documentElement.style&&t.__forceSmoothScrollPolyfill__!==!0)return;const r=t.HTMLElement||t.Element,n=468,o={scroll:t.scroll||t.scrollTo,scrollBy:t.scrollBy,elementScroll:r.prototype.scroll||s,scrollIntoView:r.prototype.scrollIntoView},i=t.performance&&t.performance.now?t.performance.now.bind(t.performance):Date.now;function a(f){const v=["MSIE ","Trident/","Edge/"];return new RegExp(v.join("|")).test(f)}const l=a(t.navigator.userAgent)?1:0;function s(f,v){this.scrollLeft=f,this.scrollTop=v}function c(f){return .5*(1-Math.cos(Math.PI*f))}function u(f){if(f===null||typeof f!="object"||f.behavior===void 0||f.behavior==="auto"||f.behavior==="instant")return!0;if(typeof f=="object"&&f.behavior==="smooth")return!1;throw new TypeError("behavior member of ScrollOptions "+f.behavior+" is not a valid value for enumeration ScrollBehavior.")}function d(f,v){if(v==="Y")return f.clientHeight+l<f.scrollHeight;if(v==="X")return f.clientWidth+l<f.scrollWidth}function h(f,v){const S=t.getComputedStyle(f,null)["overflow"+v];return S==="auto"||S==="scroll"}function p(f){const v=d(f,"Y")&&h(f,"Y"),S=d(f,"X")&&h(f,"X");return v||S}function m(f){for(;f!==e.body&&p(f)===!1;)f=f.parentNode||f.host;return f}function g(f){const v=i();let S,E,I,M=(v-f.startTime)/n;M=M>1?1:M,S=c(M),E=f.startX+(f.x-f.startX)*S,I=f.startY+(f.y-f.startY)*S,f.method.call(f.scrollable,E,I),(E!==f.x||I!==f.y)&&t.requestAnimationFrame(g.bind(t,f))}function y(f,v,S){let E,I,M,L;const C=i();f===e.body?(E=t,I=t.scrollX||t.pageXOffset,M=t.scrollY||t.pageYOffset,L=o.scroll):(E=f,I=f.scrollLeft,M=f.scrollTop,L=s),g({scrollable:E,method:L,startTime:C,startX:I,startY:M,x:v,y:S})}t.scroll=t.scrollTo=function(){if(arguments[0]!==void 0){if(u(arguments[0])===!0){o.scroll.call(t,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:t.scrollX||t.pageXOffset,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:t.scrollY||t.pageYOffset);return}y.call(t,e.body,arguments[0].left!==void 0?~~arguments[0].left:t.scrollX||t.pageXOffset,arguments[0].top!==void 0?~~arguments[0].top:t.scrollY||t.pageYOffset)}},t.scrollBy=function(){if(arguments[0]!==void 0){if(u(arguments[0])){o.scrollBy.call(t,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:0,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:0);return}y.call(t,e.body,~~arguments[0].left+(t.scrollX||t.pageXOffset),~~arguments[0].top+(t.scrollY||t.pageYOffset))}},r.prototype.scroll=r.prototype.scrollTo=function(){if(arguments[0]===void 0)return;if(u(arguments[0])===!0){if(typeof arguments[0]=="number"&&arguments[1]===void 0)throw new SyntaxError("Value could not be converted");o.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left:typeof arguments[0]!="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top:arguments[1]!==void 0?~~arguments[1]:this.scrollTop);return}const f=arguments[0].left,v=arguments[0].top;y.call(this,this,typeof f>"u"?this.scrollLeft:~~f,typeof v>"u"?this.scrollTop:~~v)},r.prototype.scrollBy=function(){if(arguments[0]!==void 0){if(u(arguments[0])===!0){o.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);return}this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})}},r.prototype.scrollIntoView=function(){if(u(arguments[0])===!0){o.scrollIntoView.call(this,arguments[0]===void 0?!0:arguments[0]);return}const f=m(this),v=f.getBoundingClientRect(),S=this.getBoundingClientRect();f!==e.body?(y.call(this,f,f.scrollLeft+S.left-v.left,f.scrollTop+S.top-v.top),t.getComputedStyle(f).position!=="fixed"&&t.scrollBy({left:v.left,top:v.top,behavior:"smooth"})):t.scrollBy({left:S.left,top:S.top,behavior:"smooth"})}}class ls{constructor(e=[],r){this.timeOffset=0,this.raf=null,this.actions=e,this.speed=r.speed}addAction(e){const r=this.raf===!0;if(!this.actions.length||this.actions[this.actions.length-1].delay<=e.delay)this.actions.push(e);else{const n=this.findActionIndex(e);this.actions.splice(n,0,e)}r&&(this.raf=requestAnimationFrame(this.rafCheck.bind(this)))}start(){this.timeOffset=0,this.lastTimestamp=performance.now(),this.raf=requestAnimationFrame(this.rafCheck.bind(this))}rafCheck(){const e=performance.now();for(this.timeOffset+=(e-this.lastTimestamp)*this.speed,this.lastTimestamp=e;this.actions.length;){const r=this.actions[0];if(this.timeOffset>=r.delay)this.actions.shift(),r.doAction();else break}this.actions.length>0?this.raf=requestAnimationFrame(this.rafCheck.bind(this)):this.raf=!0}clear(){this.raf&&(this.raf!==!0&&cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(e){this.speed=e}isActive(){return this.raf!==null}findActionIndex(e){let r=0,n=this.actions.length-1;for(;r<=n;){const o=Math.floor((r+n)/2);if(this.actions[o].delay<e.delay)r=o+1;else if(this.actions[o].delay>e.delay)n=o-1;else return o+1}return r}}function wn(t,e){if(t.type===k.IncrementalSnapshot&&t.data.source===N.MouseMove&&t.data.positions&&t.data.positions.length){const r=t.data.positions[0].timeOffset,n=t.timestamp+r;return t.delay=n-e,n-e}return t.delay=t.timestamp-e,t.delay}/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function Cn(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(l){o={error:l}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}var Be;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Be||(Be={}));var En={type:"xstate.init"};function Kt(t){return t===void 0?[]:[].concat(t)}function Ge(t){return{type:"xstate.assign",assignment:t}}function Nn(t,e){return typeof(t=typeof t=="string"&&e&&e[t]?e[t]:t)=="string"?{type:t}:typeof t=="function"?{type:t.name,exec:t}:t}function St(t){return function(e){return t===e}}function Tn(t){return typeof t=="string"?{type:t}:t}function Mn(t,e){return{value:t,context:e,actions:[],changed:!1,matches:St(t)}}function In(t,e,r){var n=e,o=!1;return[t.filter(function(i){if(i.type==="xstate.assign"){o=!0;var a=Object.assign({},n);return typeof i.assignment=="function"?a=i.assignment(n,r):Object.keys(i.assignment).forEach(function(l){a[l]=typeof i.assignment[l]=="function"?i.assignment[l](n,r):i.assignment[l]}),n=a,!1}return!0}),n,o]}function kn(t,e){e===void 0&&(e={});var r=Cn(In(Kt(t.states[t.initial].entry).map(function(a){return Nn(a,e.actions)}),t.context,En),2),n=r[0],o=r[1],i={config:t,_options:e,initialState:{value:t.initial,actions:n,context:o,matches:St(t.initial)},transition:function(a,l){var s,c,u=typeof a=="string"?{value:a,context:t.context}:a,d=u.value,h=u.context,p=Tn(l),m=t.states[d];if(m.on){var g=Kt(m.on[p.type]);try{for(var y=function(O){var G=typeof Symbol=="function"&&Symbol.iterator,w=G&&O[G],b=0;if(w)return w.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&b>=O.length&&(O=void 0),{value:O&&O[b++],done:!O}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")}(g),f=y.next();!f.done;f=y.next()){var v=f.value;if(v===void 0)return Mn(d,h);var S=typeof v=="string"?{target:v}:v,E=S.target,I=S.actions,M=I===void 0?[]:I,L=S.cond,C=L===void 0?function(){return!0}:L,Y=E===void 0,W=E??d,q=t.states[W];if(C(h,p)){var U=Cn(In((Y?Kt(M):[].concat(m.exit,M,q.entry).filter(function(O){return O})).map(function(O){return Nn(O,i._options.actions)}),h,p),3),V=U[0],B=U[1],A=U[2],F=E??d;return{value:F,context:B,actions:V,changed:E!==d||V.length>0||A,matches:St(F)}}}}catch(O){s={error:O}}finally{try{f&&!f.done&&(c=y.return)&&c.call(y)}finally{if(s)throw s.error}}}return Mn(d,h)}};return i}var Dn=function(t,e){return t.actions.forEach(function(r){var n=r.exec;return n&&n(t.context,e)})};function On(t){var e=t.initialState,r=Be.NotStarted,n=new Set,o={_machine:t,send:function(i){r===Be.Running&&(e=t.transition(e,i),Dn(e,Tn(i)),n.forEach(function(a){return a(e)}))},subscribe:function(i){return n.add(i),i(e),{unsubscribe:function(){return n.delete(i)}}},start:function(i){if(i){var a=typeof i=="object"?i:{context:t.config.context,value:i};e={value:a.value,actions:[],context:a.context,matches:St(a.value)}}return r=Be.Running,Dn(e,En),o},stop:function(){return r=Be.Stopped,n.clear(),o},get state(){return e},get status(){return r}};return o}var cs=Object.defineProperty,us=Object.defineProperties,ds=Object.getOwnPropertyDescriptors,Rn=Object.getOwnPropertySymbols,hs=Object.prototype.hasOwnProperty,ps=Object.prototype.propertyIsEnumerable,xn=(t,e,r)=>e in t?cs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Jt=(t,e)=>{for(var r in e||(e={}))hs.call(e,r)&&xn(t,r,e[r]);if(Rn)for(var r of Rn(e))ps.call(e,r)&&xn(t,r,e[r]);return t},Qt=(t,e)=>us(t,ds(e));function ms(t,e){for(let r=t.length-1;r>=0;r--){const n=t[r];if(n.type===k.Meta&&n.timestamp<=e)return t.slice(r)}return t}function fs(t,{getCastFn:e,applyEventsSynchronously:r,emitter:n}){const o=kn({id:"player",context:t,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:Ge({lastPlayedEvent:(i,a)=>a.type==="CAST_EVENT"?a.payload.event:i.lastPlayedEvent}),recordTimeOffset:Ge((i,a)=>{let l=i.timeOffset;return"payload"in a&&"timeOffset"in a.payload&&(l=a.payload.timeOffset),Qt(Jt({},i),{timeOffset:l,baselineTime:i.events[0].timestamp+l})}),play(i){var a;const{timer:l,events:s,baselineTime:c,lastPlayedEvent:u}=i;l.clear();for(const m of s)wn(m,c);const d=ms(s,c);let h=u?.timestamp;u?.type===k.IncrementalSnapshot&&u.data.source===N.MouseMove&&(h=u.timestamp+((a=u.data.positions[0])==null?void 0:a.timeOffset)),c<(h||0)&&n.emit(j.PlayBack);const p=new Array;for(const m of d)if(!(h&&h<c&&(m.timestamp<=h||m===u)))if(m.timestamp<c)p.push(m);else{const g=e(m,!1);l.addAction({doAction:()=>{g()},delay:m.delay})}r(p),n.emit(j.Flush),l.start()},pause(i){i.timer.clear()},resetLastPlayedEvent:Ge(i=>Qt(Jt({},i),{lastPlayedEvent:null})),startLive:Ge({baselineTime:(i,a)=>(i.timer.start(),a.type==="TO_LIVE"&&a.payload.baselineTime?a.payload.baselineTime:Date.now())}),addEvent:Ge((i,a)=>{const{baselineTime:l,timer:s,events:c}=i;if(a.type==="ADD_EVENT"){const{event:u}=a.payload;wn(u,l);let d=c.length-1;if(!c[d]||c[d].timestamp<=u.timestamp)c.push(u);else{let m=-1,g=0;for(;g<=d;){const y=Math.floor((g+d)/2);c[y].timestamp<=u.timestamp?g=y+1:d=y-1}m===-1&&(m=g),c.splice(m,0,u)}const h=u.timestamp<l,p=e(u,h);h?p():s.isActive()&&s.addAction({doAction:()=>{p()},delay:u.delay})}return Qt(Jt({},i),{events:c})})}});return On(o)}function gs(t){const e=kn({id:"speed",context:t,initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:(r,n)=>{"payload"in n&&r.timer.setSpeed(n.payload.speed)},recordSpeed:Ge({normalSpeed:r=>r.timer.speed}),restoreSpeed:r=>{r.timer.setSpeed(r.normalSpeed)}}});return On(e)}const ys=t=>[`.${t} { background: currentColor }`,"noscript { display: none !important; }"];var vs=(t,e,r)=>new Promise((n,o)=>{var i=s=>{try{l(r.next(s))}catch(c){o(c)}},a=s=>{try{l(r.throw(s))}catch(c){o(c)}},l=s=>s.done?n(s.value):Promise.resolve(s.value).then(i,a);l((r=r.apply(t,e)).next())});const Ln=new Map;function An(t,e){let r=Ln.get(t);return r||(r=new Map,Ln.set(t,r)),r.has(e)||r.set(e,[]),r.get(e)}function ke(t,e,r){return n=>vs(this,null,function*(){if(n&&typeof n=="object"&&"rr_type"in n)if(r&&(r.isUnchanged=!1),n.rr_type==="ImageBitmap"&&"args"in n){const o=yield ke(t,e,r)(n.args);return yield createImageBitmap.apply(null,o)}else if("index"in n){if(r||e===null)return n;const{rr_type:o,index:i}=n;return An(e,o)[i]}else if("args"in n){const{rr_type:o,args:i}=n,a=window[o];return new a(...yield Promise.all(i.map(ke(t,e,r))))}else{if("base64"in n)return pi(n.base64);if("src"in n){const o=t.get(n.src);if(o)return o;{const i=new Image;return i.src=n.src,t.set(n.src,i),i}}else if("data"in n&&n.rr_type==="Blob"){const o=yield Promise.all(n.data.map(ke(t,e,r)));return new Blob(o,{type:n.type})}}else if(Array.isArray(n))return yield Promise.all(n.map(ke(t,e,r)));return n})}var Ss=(t,e,r)=>new Promise((n,o)=>{var i=s=>{try{l(r.next(s))}catch(c){o(c)}},a=s=>{try{l(r.throw(s))}catch(c){o(c)}},l=s=>s.done?n(s.value):Promise.resolve(s.value).then(i,a);l((r=r.apply(t,e)).next())});function bs(t,e){try{return e===Ce.WebGL?t.getContext("webgl")||t.getContext("experimental-webgl"):t.getContext("webgl2")}catch{return null}}const ws=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function Cs(t,e){if(!(e!=null&&e.constructor))return;const{name:r}=e.constructor;if(!ws.includes(r))return;const n=An(t,r);n.includes(e)||n.push(e)}function Es(t){return Ss(this,arguments,function*({mutation:e,target:r,type:n,imageMap:o,errorHandler:i}){try{const a=bs(r,n);if(!a)return;if(e.setter){a[e.property]=e.args[0];return}const l=a[e.property],s=yield Promise.all(e.args.map(ke(o,a))),c=l.apply(a,s);Cs(a,c)}catch(a){i(e,a)}})}var Ns=(t,e,r)=>new Promise((n,o)=>{var i=s=>{try{l(r.next(s))}catch(c){o(c)}},a=s=>{try{l(r.throw(s))}catch(c){o(c)}},l=s=>s.done?n(s.value):Promise.resolve(s.value).then(i,a);l((r=r.apply(t,e)).next())});function Ts(t){return Ns(this,arguments,function*({event:e,mutation:r,target:n,imageMap:o,errorHandler:i}){try{const a=n.getContext("2d");if(r.setter){a[r.property]=r.args[0];return}const l=a[r.property];if(r.property==="drawImage"&&typeof r.args[0]=="string")o.get(e),l.apply(a,r.args);else{const s=yield Promise.all(r.args.map(ke(o,a)));l.apply(a,s)}}catch(a){i(r,a)}})}var Ms=(t,e,r)=>new Promise((n,o)=>{var i=s=>{try{l(r.next(s))}catch(c){o(c)}},a=s=>{try{l(r.throw(s))}catch(c){o(c)}},l=s=>s.done?n(s.value):Promise.resolve(s.value).then(i,a);l((r=r.apply(t,e)).next())});function Fn(t){return Ms(this,arguments,function*({event:e,mutation:r,target:n,imageMap:o,canvasEventMap:i,errorHandler:a}){try{const l=i.get(e)||r,s="commands"in l?l.commands:[l];if([Ce.WebGL,Ce.WebGL2].includes(r.type)){for(let c=0;c<s.length;c++){const u=s[c];yield Es({mutation:u,type:r.type,target:n,imageMap:o,errorHandler:a})}return}for(let c=0;c<s.length;c++){const u=s[c];yield Ts({event:e,mutation:u,target:n,imageMap:o,errorHandler:a})}}catch(l){a(r,l)}})}var Is=Object.defineProperty,ks=Object.defineProperties,Ds=Object.getOwnPropertyDescriptors,_n=Object.getOwnPropertySymbols,Os=Object.prototype.hasOwnProperty,Rs=Object.prototype.propertyIsEnumerable,Pn=(t,e,r)=>e in t?Is(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bt=(t,e)=>{for(var r in e||(e={}))Os.call(e,r)&&Pn(t,r,e[r]);if(_n)for(var r of _n(e))Rs.call(e,r)&&Pn(t,r,e[r]);return t},qt=(t,e)=>ks(t,Ds(e)),er=(t,e,r)=>new Promise((n,o)=>{var i=s=>{try{l(r.next(s))}catch(c){o(c)}},a=s=>{try{l(r.throw(s))}catch(c){o(c)}},l=s=>s.done?n(s.value):Promise.resolve(s.value).then(i,a);l((r=r.apply(t,e)).next())});const xs=10*1e3,Ls=5*1e3,As=bn||ss,$n="[replayer]",tr={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function Wn(t){return t.type==k.IncrementalSnapshot&&(t.data.source==N.TouchMove||t.data.source==N.MouseInteraction&&t.data.type==$.TouchStart)}class Fs{constructor(e,r){if(this.usingVirtualDom=!1,this.virtualDom=new Ve,this.mouseTail=null,this.tailPositions=[],this.emitter=As(),this.legacy_missingNodeRetryMap={},this.cache=Dr(),this.imageMap=new Map,this.canvasEventMap=new Map,this.mirror=vr(),this.styleMirror=new Ut,this.firstFullSnapshot=null,this.newDocumentQueue=[],this.mousePos=null,this.touchActive=null,this.lastMouseDownEvent=null,this.lastSelectionData=null,this.constructedStyleMutations=[],this.adoptedStyleSheets=[],this.handleResize=l=>{this.iframe.style.display="inherit";for(const s of[this.mouseTail,this.iframe])!s||(s.setAttribute("width",String(l.width)),s.setAttribute("height",String(l.height)))},this.applyEventsSynchronously=l=>{for(const s of l){switch(s.type){case k.DomContentLoaded:case k.Load:case k.Custom:continue;case k.FullSnapshot:case k.Meta:case k.Plugin:case k.IncrementalSnapshot:break}this.getCastFn(s,!0)()}},this.getCastFn=(l,s=!1)=>{let c;switch(l.type){case k.DomContentLoaded:case k.Load:break;case k.Custom:c=()=>{this.emitter.emit(j.CustomEvent,l)};break;case k.Meta:c=()=>this.emitter.emit(j.Resize,{width:l.data.width,height:l.data.height});break;case k.FullSnapshot:c=()=>{var u;if(this.firstFullSnapshot){if(this.firstFullSnapshot===l){this.firstFullSnapshot=!0;return}}else this.firstFullSnapshot=!0;this.rebuildFullSnapshot(l,s),(u=this.iframe.contentWindow)==null||u.scrollTo(l.data.initialOffset),this.styleMirror.reset()};break;case k.IncrementalSnapshot:c=()=>{if(this.applyIncremental(l,s),!s&&(l===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive&&!this.nextUserInteractionEvent)){for(const u of this.service.state.context.events)if(!(u.timestamp<=l.timestamp)&&this.isUserInteraction(u)){u.delay-l.delay>xs*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=u);break}if(this.nextUserInteractionEvent){const u=this.nextUserInteractionEvent.delay-l.delay,d={speed:Math.min(Math.round(u/Ls),this.config.maxSpeed)};this.speedService.send({type:"FAST_FORWARD",payload:d}),this.emitter.emit(j.SkipStart,d)}}};break}return()=>{c&&c();for(const d of this.config.plugins||[])d.handler&&d.handler(l,s,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:l}});const u=this.service.state.context.events.length-1;if(!this.config.liveMode&&l===this.service.state.context.events[u]){const d=()=>{u<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(j.Finish))};let h=50;l.type===k.IncrementalSnapshot&&l.data.source===N.MouseMove&&l.data.positions.length&&(h+=Math.max(0,-l.data.positions[0].timeOffset)),setTimeout(d,h)}this.emitter.emit(j.EventCast,l)}},!(r!=null&&r.liveMode)&&e.length<2)throw new Error("Replayer need at least 2 events.");const n={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:tr,useVirtualDom:!0,logger:console};this.config=Object.assign({},n,r),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(j.Resize,this.handleResize),this.setupDom();for(const l of this.config.plugins||[])l.getMirror&&l.getMirror({nodeMirror:this.mirror});this.emitter.on(j.Flush,()=>{if(this.usingVirtualDom){const l={mirror:this.mirror,applyCanvas:(s,c,u)=>{Fn({event:s,mutation:c,target:u,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this),applyStyleSheetMutation:(s,c)=>{s.source===N.StyleSheetRule?this.applyStyleSheetRule(s,c):s.source===N.StyleDeclaration&&this.applyStyleDeclaration(s,c)},afterAppend:(s,c)=>{for(const u of this.config.plugins||[])u.onBuild&&u.onBuild(s,{id:c,replayer:this})}};if(this.iframe.contentDocument)try{ve(this.iframe.contentDocument,this.virtualDom,l,this.virtualDom.mirror)}catch(s){console.warn(s)}if(this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(const s in this.legacy_missingNodeRetryMap)try{const c=this.legacy_missingNodeRetryMap[s],u=vt(c.node,this.mirror,this.virtualDom.mirror);ve(u,c.node,l,this.virtualDom.mirror),c.node=u}catch(c){this.warn(c)}this.constructedStyleMutations.forEach(s=>{this.applyStyleSheetMutation(s)}),this.constructedStyleMutations=[],this.adoptedStyleSheets.forEach(s=>{this.applyAdoptedStyleSheet(s)}),this.adoptedStyleSheets=[]}if(this.mousePos&&(this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null),this.touchActive===!0?this.mouse.classList.add("touch-active"):this.touchActive===!1&&this.mouse.classList.remove("touch-active"),this.touchActive=null,this.lastMouseDownEvent){const[l,s]=this.lastMouseDownEvent;l.dispatchEvent(s)}this.lastMouseDownEvent=null,this.lastSelectionData&&(this.applySelection(this.lastSelectionData),this.lastSelectionData=null)}),this.emitter.on(j.PlayBack,()=>{this.firstFullSnapshot=null,this.mirror.reset(),this.styleMirror.reset()});const o=new ls([],{speed:this.config.speed});this.service=fs({events:e.map(l=>r&&r.unpackFn?r.unpackFn(l):l).sort((l,s)=>l.timestamp-s.timestamp),timer:o,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe(l=>{this.emitter.emit(j.StateChange,{player:l})}),this.speedService=gs({normalSpeed:-1,timer:o}),this.speedService.start(),this.speedService.subscribe(l=>{this.emitter.emit(j.StateChange,{speed:l})});const i=this.service.state.context.events.find(l=>l.type===k.Meta),a=this.service.state.context.events.find(l=>l.type===k.FullSnapshot);if(i){const{width:l,height:s}=i.data;setTimeout(()=>{this.emitter.emit(j.Resize,{width:l,height:s})},0)}a&&setTimeout(()=>{var l;this.firstFullSnapshot||(this.firstFullSnapshot=a,this.rebuildFullSnapshot(a),(l=this.iframe.contentWindow)==null||l.scrollTo(a.data.initialOffset))},1),this.service.state.context.events.find(Wn)&&this.mouse.classList.add("touch-device")}get timer(){return this.service.state.context.timer}on(e,r){return this.emitter.on(e,r),this}off(e,r){return this.emitter.off(e,r),this}setConfig(e){Object.keys(e).forEach(r=>{e[r],this.config[r]=e[r]}),this.config.skipInactive||this.backToNormal(),typeof e.speed<"u"&&this.speedService.send({type:"SET_SPEED",payload:{speed:e.speed}}),typeof e.mouseTail<"u"&&(e.mouseTail===!1?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){const e=this.service.state.context.events[0],r=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:e.timestamp,endTime:r.timestamp,totalTime:r.timestamp-e.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){const{baselineTime:e,events:r}=this.service.state.context;return e-r[0].timestamp}getMirror(){return this.mirror}play(e=0){var r,n;this.service.state.matches("paused")?this.service.send({type:"PLAY",payload:{timeOffset:e}}):(this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:e}})),(n=(r=this.iframe.contentDocument)==null?void 0:r.getElementsByTagName("html")[0])==null||n.classList.remove("rrweb-paused"),this.emitter.emit(j.Start)}pause(e){var r,n;e===void 0&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),typeof e=="number"&&(this.play(e),this.service.send({type:"PAUSE"})),(n=(r=this.iframe.contentDocument)==null?void 0:r.getElementsByTagName("html")[0])==null||n.classList.add("rrweb-paused"),this.emitter.emit(j.Pause)}resume(e=0){this.warn("The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface."),this.play(e),this.emitter.emit(j.Resume)}destroy(){this.pause(),this.config.root.removeChild(this.wrapper),this.emitter.emit(j.Destroy)}startLive(e){this.service.send({type:"TO_LIVE",payload:{baselineTime:e}})}addEvent(e){const r=this.config.unpackFn?this.config.unpackFn(e):e;Wn(r)&&this.mouse.classList.add("touch-device"),Promise.resolve().then(()=>this.service.send({type:"ADD_EVENT",payload:{event:r}}))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=Dr()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),this.config.mouseTail!==!1&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");const e=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&e.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",e.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(as(this.iframe.contentWindow,this.iframe.contentDocument),Ft(this.iframe.contentWindow))}rebuildFullSnapshot(e,r=!1){if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&this.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};const n=[],o=(l,s)=>{this.collectIframeAndAttachDocument(n,l);for(const c of this.config.plugins||[])c.onBuild&&c.onBuild(l,{id:s,replayer:this})};this.usingVirtualDom&&(this.virtualDom.destroyTree(),this.usingVirtualDom=!1),this.mirror.reset(),Fo(e.data.node,{doc:this.iframe.contentDocument,afterAppend:o,cache:this.cache,mirror:this.mirror}),o(this.iframe.contentDocument,e.data.node.id);for(const{mutationInQueue:l,builtNode:s}of n)this.attachDocumentToIframe(l,s),this.newDocumentQueue=this.newDocumentQueue.filter(c=>c!==l);const{documentElement:i,head:a}=this.iframe.contentDocument;this.insertStyleRules(i,a),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(j.FullsnapshotRebuilded,e),r||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(e,r){var n;const o=ys(this.config.blockClass).concat(this.config.insertStyleRules);if(this.config.pauseAnimation&&o.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),this.usingVirtualDom){const i=this.virtualDom.createElement("style");this.virtualDom.mirror.add(i,Sn(i,this.virtualDom.unserializedId)),e.insertBefore(i,r),i.rules.push({source:N.StyleSheetRule,adds:o.map((a,l)=>({rule:a,index:l}))})}else{const i=document.createElement("style");e.insertBefore(i,r);for(let a=0;a<o.length;a++)(n=i.sheet)==null||n.insertRule(o[a],a)}}attachDocumentToIframe(e,r){const n=this.usingVirtualDom?this.virtualDom.mirror:this.mirror,o=[],i=(a,l)=>{this.collectIframeAndAttachDocument(o,a);const s=n.getMeta(a);if(s?.type===x.Element&&s?.tagName.toUpperCase()==="HTML"){const{documentElement:c,head:u}=r.contentDocument;this.insertStyleRules(c,u)}if(!this.usingVirtualDom)for(const c of this.config.plugins||[])c.onBuild&&c.onBuild(a,{id:l,replayer:this})};Ke(e.node,{doc:r.contentDocument,mirror:n,hackCss:!0,skipChild:!1,afterAppend:i,cache:this.cache}),i(r.contentDocument,e.node.id);for(const{mutationInQueue:a,builtNode:l}of o)this.attachDocumentToIframe(a,l),this.newDocumentQueue=this.newDocumentQueue.filter(s=>s!==a)}collectIframeAndAttachDocument(e,r){if($e(r,this.mirror)){const n=this.newDocumentQueue.find(o=>o.parentId===this.mirror.getId(r));n&&e.push({mutationInQueue:n,builtNode:r})}}waitForStylesheetLoad(){var e;const r=(e=this.iframe.contentDocument)==null?void 0:e.head;if(r){const n=new Set;let o,i=this.service.state;const a=()=>{i=this.service.state};this.emitter.on(j.Start,a),this.emitter.on(j.Pause,a);const l=()=>{this.emitter.off(j.Start,a),this.emitter.off(j.Pause,a)};r.querySelectorAll('link[rel="stylesheet"]').forEach(s=>{s.sheet||(n.add(s),s.addEventListener("load",()=>{n.delete(s),n.size===0&&o!==-1&&(i.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(j.LoadStylesheetEnd),o&&clearTimeout(o),l())}))}),n.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(j.LoadStylesheetStart),o=setTimeout(()=>{i.matches("playing")&&this.play(this.getCurrentTime()),o=-1,l()},this.config.loadTimeout))}}preloadAllImages(){return er(this,null,function*(){this.service.state;const e=()=>{this.service.state};this.emitter.on(j.Start,e),this.emitter.on(j.Pause,e);const r=[];for(const n of this.service.state.context.events)n.type===k.IncrementalSnapshot&&n.data.source===N.CanvasMutation&&(r.push(this.deserializeAndPreloadCanvasEvents(n.data,n)),("commands"in n.data?n.data.commands:[n.data]).forEach(o=>{this.preloadImages(o,n)}));return Promise.all(r)})}preloadImages(e,r){if(e.property==="drawImage"&&typeof e.args[0]=="string"&&!this.imageMap.has(r)){const n=document.createElement("canvas"),o=n.getContext("2d"),i=o?.createImageData(n.width,n.height);i?.data,JSON.parse(e.args[0]),o?.putImageData(i,0,0)}}deserializeAndPreloadCanvasEvents(e,r){return er(this,null,function*(){if(!this.canvasEventMap.has(r)){const n={isUnchanged:!0};if("commands"in e){const o=yield Promise.all(e.commands.map(i=>er(this,null,function*(){const a=yield Promise.all(i.args.map(ke(this.imageMap,null,n)));return qt(bt({},i),{args:a})})));n.isUnchanged===!1&&this.canvasEventMap.set(r,qt(bt({},e),{commands:o}))}else{const o=yield Promise.all(e.args.map(ke(this.imageMap,null,n)));n.isUnchanged===!1&&this.canvasEventMap.set(r,qt(bt({},e),{args:o}))}}})}applyIncremental(e,r){var n,o,i;const{data:a}=e;switch(a.source){case N.Mutation:{try{this.applyMutation(a,r)}catch(l){this.warn(`Exception in mutation ${l.message||l}`,a)}break}case N.Drag:case N.TouchMove:case N.MouseMove:if(r){const l=a.positions[a.positions.length-1];this.mousePos={x:l.x,y:l.y,id:l.id,debugData:a}}else a.positions.forEach(l=>{const s={doAction:()=>{this.moveAndHover(l.x,l.y,l.id,r,a)},delay:l.timeOffset+e.timestamp-this.service.state.context.baselineTime};this.timer.addAction(s)}),this.timer.addAction({doAction(){},delay:e.delay-((n=a.positions[0])==null?void 0:n.timeOffset)});break;case N.MouseInteraction:{if(a.id===-1)break;const l=new Event($[a.type].toLowerCase()),s=this.mirror.getNode(a.id);if(!s)return this.debugNodeNotFound(a,a.id);this.emitter.emit(j.MouseInteraction,{type:a.type,target:s});const{triggerFocus:c}=this.config;switch(a.type){case $.Blur:"blur"in s&&s.blur();break;case $.Focus:c&&s.focus&&s.focus({preventScroll:!0});break;case $.Click:case $.TouchStart:case $.TouchEnd:case $.MouseDown:case $.MouseUp:r?(a.type===$.TouchStart?this.touchActive=!0:a.type===$.TouchEnd&&(this.touchActive=!1),a.type===$.MouseDown?this.lastMouseDownEvent=[s,l]:a.type===$.MouseUp&&(this.lastMouseDownEvent=null),this.mousePos={x:a.x,y:a.y,id:a.id,debugData:a}):(a.type===$.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(a.x,a.y,a.id,r,a),a.type===$.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):a.type===$.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):a.type===$.TouchEnd?this.mouse.classList.remove("touch-active"):s.dispatchEvent(l));break;case $.TouchCancel:r?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:s.dispatchEvent(l)}break}case N.Scroll:{if(a.id===-1)break;if(this.usingVirtualDom){const l=this.virtualDom.mirror.getNode(a.id);if(!l)return this.debugNodeNotFound(a,a.id);l.scrollData=a;break}this.applyScroll(a,r);break}case N.ViewportResize:this.emitter.emit(j.Resize,{width:a.width,height:a.height});break;case N.Input:{if(a.id===-1)break;if(this.usingVirtualDom){const l=this.virtualDom.mirror.getNode(a.id);if(!l)return this.debugNodeNotFound(a,a.id);l.inputData=a;break}this.applyInput(a);break}case N.MediaInteraction:{const l=this.usingVirtualDom?this.virtualDom.mirror.getNode(a.id):this.mirror.getNode(a.id);if(!l)return this.debugNodeNotFound(a,a.id);const s=l;try{a.currentTime!==void 0&&(s.currentTime=a.currentTime),a.volume!==void 0&&(s.volume=a.volume),a.muted!==void 0&&(s.muted=a.muted),a.type===Ee.Pause&&s.pause(),a.type===Ee.Play&&s.play(),a.type===Ee.RateChange&&(s.playbackRate=a.playbackRate)}catch(c){this.warn(`Failed to replay media interactions: ${c.message||c}`)}break}case N.StyleSheetRule:case N.StyleDeclaration:{this.usingVirtualDom?a.styleId?this.constructedStyleMutations.push(a):a.id&&((o=this.virtualDom.mirror.getNode(a.id))==null||o.rules.push(a)):this.applyStyleSheetMutation(a);break}case N.CanvasMutation:{if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){const l=this.virtualDom.mirror.getNode(a.id);if(!l)return this.debugNodeNotFound(a,a.id);l.canvasMutations.push({event:e,mutation:a})}else{const l=this.mirror.getNode(a.id);if(!l)return this.debugNodeNotFound(a,a.id);Fn({event:e,mutation:a,target:l,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break}case N.Font:{try{const l=new FontFace(a.family,a.buffer?new Uint8Array(JSON.parse(a.fontSource)):a.fontSource,a.descriptors);(i=this.iframe.contentDocument)==null||i.fonts.add(l)}catch(l){this.warn(l)}break}case N.Selection:{if(r){this.lastSelectionData=a;break}this.applySelection(a);break}case N.AdoptedStyleSheet:{this.usingVirtualDom?this.adoptedStyleSheets.push(a):this.applyAdoptedStyleSheet(a);break}}}applyMutation(e,r){if(this.config.useVirtualDom&&!this.usingVirtualDom&&r&&(this.usingVirtualDom=!0,ns(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(const c in this.legacy_missingNodeRetryMap)try{const u=this.legacy_missingNodeRetryMap[c],d=vn(u.node,this.virtualDom,this.mirror);d&&(u.node=d)}catch(u){this.warn(u)}const n=this.usingVirtualDom?this.virtualDom.mirror:this.mirror;e.removes=e.removes.filter(c=>n.getNode(c.id)?!0:(this.warnNodeNotFound(e,c.id),!1)),e.removes.forEach(c=>{var u;const d=n.getNode(c.id);if(!d)return;let h=n.getNode(c.parentId);if(!h)return this.warnNodeNotFound(e,c.parentId);if(c.isShadow&&Me(h)&&(h=h.shadowRoot),n.removeNodeFromMap(d),h)try{h.removeChild(d),this.usingVirtualDom&&d.nodeName==="#text"&&h.nodeName==="STYLE"&&((u=h.rules)==null?void 0:u.length)>0&&(h.rules=[])}catch(p){if(p instanceof DOMException)this.warn("parent could not remove child in mutation",h,d,e);else throw p}});const o=bt({},this.legacy_missingNodeRetryMap),i=[],a=c=>{let u=null;return c.nextId&&(u=n.getNode(c.nextId)),c.nextId!==null&&c.nextId!==void 0&&c.nextId!==-1&&!u},l=c=>{var u,d;if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");let h=n.getNode(c.parentId);if(!h)return c.node.type===x.Document?this.newDocumentQueue.push(c):i.push(c);c.node.isShadow&&(Me(h)||h.attachShadow({mode:"open"}),h=h.shadowRoot);let p=null,m=null;if(c.previousId&&(p=n.getNode(c.previousId)),c.nextId&&(m=n.getNode(c.nextId)),a(c))return i.push(c);if(c.node.rootId&&!n.getNode(c.node.rootId))return;const g=c.node.rootId?n.getNode(c.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if($e(h,n)){this.attachDocumentToIframe(c,h);return}const y=(S,E)=>{if(!this.usingVirtualDom)for(const I of this.config.plugins||[])I.onBuild&&I.onBuild(S,{id:E,replayer:this})},f=Ke(c.node,{doc:g,mirror:n,skipChild:!0,hackCss:!0,cache:this.cache,afterAppend:y});if(c.previousId===-1||c.nextId===-1){o[c.node.id]={node:f,mutation:c};return}const v=n.getMeta(h);if(v&&v.type===x.Element&&v.tagName==="textarea"&&c.node.type===x.Text){const S=Array.isArray(h.childNodes)?h.childNodes:Array.from(h.childNodes);for(const E of S)E.nodeType===h.TEXT_NODE&&h.removeChild(E)}else if(v?.type===x.Document){const S=h;c.node.type===x.DocumentType&&((u=S.childNodes[0])==null?void 0:u.nodeType)===Node.DOCUMENT_TYPE_NODE&&S.removeChild(S.childNodes[0]),f.nodeName==="HTML"&&S.documentElement&&S.removeChild(S.documentElement)}if(p&&p.nextSibling&&p.nextSibling.parentNode?h.insertBefore(f,p.nextSibling):m&&m.parentNode?h.contains(m)?h.insertBefore(f,m):h.insertBefore(f,null):h.appendChild(f),y(f,c.node.id),this.usingVirtualDom&&f.nodeName==="#text"&&h.nodeName==="STYLE"&&((d=h.rules)==null?void 0:d.length)>0&&(h.rules=[]),$e(f,this.mirror)){const S=this.mirror.getId(f),E=this.newDocumentQueue.find(I=>I.parentId===S);E&&(this.attachDocumentToIframe(E,f),this.newDocumentQueue=this.newDocumentQueue.filter(I=>I!==E))}(c.previousId||c.nextId)&&this.legacy_resolveMissingNode(o,h,f,c)};e.adds.forEach(c=>{l(c)});const s=Date.now();for(;i.length;){const c=Rr(i);if(i.length=0,Date.now()-s>500){this.warn("Timeout in the loop, please check the resolve tree data:",c);break}for(const u of c)n.getNode(u.value.parentId)?_t(u,d=>{l(d)}):this.debug("Drop resolve tree since there is no parent for the root node.",u)}Object.keys(o).length&&Object.assign(this.legacy_missingNodeRetryMap,o),xr(e.texts).forEach(c=>{var u;const d=n.getNode(c.id);if(!d)return e.removes.find(h=>h.id===c.id)?void 0:this.warnNodeNotFound(e,c.id);if(d.textContent=c.value,this.usingVirtualDom){const h=d.parentNode;((u=h?.rules)==null?void 0:u.length)>0&&(h.rules=[])}}),e.attributes.forEach(c=>{const u=n.getNode(c.id);if(!u)return e.removes.find(d=>d.id===c.id)?void 0:this.warnNodeNotFound(e,c.id);for(const d in c.attributes)if(typeof d=="string"){const h=c.attributes[d];if(h===null)u.removeAttribute(d);else if(typeof h=="string")try{if(d==="_cssText"&&(u.nodeName==="LINK"||u.nodeName==="STYLE"))try{const p=n.getMeta(u);Object.assign(p.attributes,c.attributes);const m=Ke(p,{doc:u.ownerDocument,mirror:n,skipChild:!0,hackCss:!0,cache:this.cache}),g=u.nextSibling,y=u.parentNode;if(m&&y){y.removeChild(u),y.insertBefore(m,g),n.replace(c.id,m);break}}catch{}u.setAttribute(d,h)}catch(p){this.warn("An error occurred may due to the checkout feature.",p)}else if(d==="style"){const p=h,m=u;for(const g in p)if(p[g]===!1)m.style.removeProperty(g);else if(p[g]instanceof Array){const y=p[g];m.style.setProperty(g,y[0],y[1])}else{const y=p[g];m.style.setProperty(g,y)}}}})}applyScroll(e,r){var n,o;const i=this.mirror.getNode(e.id);if(!i)return this.debugNodeNotFound(e,e.id);const a=this.mirror.getMeta(i);if(i===this.iframe.contentDocument)(n=this.iframe.contentWindow)==null||n.scrollTo({top:e.y,left:e.x,behavior:r?"auto":"smooth"});else if(a?.type===x.Document)(o=i.defaultView)==null||o.scrollTo({top:e.y,left:e.x,behavior:r?"auto":"smooth"});else try{i.scrollTo({top:e.y,left:e.x,behavior:r?"auto":"smooth"})}catch{}}applyInput(e){const r=this.mirror.getNode(e.id);if(!r)return this.debugNodeNotFound(e,e.id);try{r.checked=e.isChecked,r.value=e.text}catch{}}applySelection(e){try{const r=new Set,n=e.ranges.map(({start:o,startOffset:i,end:a,endOffset:l})=>{const s=this.mirror.getNode(o),c=this.mirror.getNode(a);if(!s||!c)return;const u=new Range;u.setStart(s,i),u.setEnd(c,l);const d=s.ownerDocument,h=d?.getSelection();return h&&r.add(h),{range:u,selection:h}});r.forEach(o=>o.removeAllRanges()),n.forEach(o=>{var i;return o&&((i=o.selection)==null?void 0:i.addRange(o.range))})}catch{}}applyStyleSheetMutation(e){var r;let n=null;e.styleId?n=this.styleMirror.getStyle(e.styleId):e.id&&(n=((r=this.mirror.getNode(e.id))==null?void 0:r.sheet)||null),n&&(e.source===N.StyleSheetRule?this.applyStyleSheetRule(e,n):e.source===N.StyleDeclaration&&this.applyStyleDeclaration(e,n))}applyStyleSheetRule(e,r){var n,o,i,a;if((n=e.adds)==null||n.forEach(({rule:l,index:s})=>{try{if(Array.isArray(s)){const{positions:c,index:u}=Wt(s);We(r.cssRules,c).insertRule(l,u)}else{const c=s===void 0?void 0:Math.min(s,r.cssRules.length);r?.insertRule(l,c)}}catch{}}),(o=e.removes)==null||o.forEach(({index:l})=>{try{if(Array.isArray(l)){const{positions:s,index:c}=Wt(l);We(r.cssRules,s).deleteRule(c||0)}else r?.deleteRule(l)}catch{}}),e.replace)try{(i=r.replace)==null||i.call(r,e.replace)}catch{}if(e.replaceSync)try{(a=r.replaceSync)==null||a.call(r,e.replaceSync)}catch{}}applyStyleDeclaration(e,r){e.set&&We(r.rules,e.index).style.setProperty(e.set.property,e.set.value,e.set.priority),e.remove&&We(r.rules,e.index).style.removeProperty(e.remove.property)}applyAdoptedStyleSheet(e){var r;const n=this.mirror.getNode(e.id);if(!n)return;(r=e.styles)==null||r.forEach(l=>{var s;let c=null,u=null;if(Me(n)?u=((s=n.ownerDocument)==null?void 0:s.defaultView)||null:n.nodeName==="#document"&&(u=n.defaultView),!!u)try{c=new u.CSSStyleSheet,this.styleMirror.add(c,l.styleId),this.applyStyleSheetRule({source:N.StyleSheetRule,adds:l.rules},c)}catch{}});const o=10;let i=0;const a=(l,s)=>{const c=s.map(u=>this.styleMirror.getStyle(u)).filter(u=>u!==null);Me(l)?l.shadowRoot.adoptedStyleSheets=c:l.nodeName==="#document"&&(l.adoptedStyleSheets=c),c.length!==s.length&&i<o&&(setTimeout(()=>a(l,s),0+100*i),i++)};a(n,e.styleIds)}legacy_resolveMissingNode(e,r,n,o){const{previousId:i,nextId:a}=o,l=i&&e[i],s=a&&e[a];if(l){const{node:c,mutation:u}=l;r.insertBefore(c,n),delete e[u.node.id],delete this.legacy_missingNodeRetryMap[u.node.id],(u.previousId||u.nextId)&&this.legacy_resolveMissingNode(e,r,c,u)}if(s){const{node:c,mutation:u}=s;r.insertBefore(c,n.nextSibling),delete e[u.node.id],delete this.legacy_missingNodeRetryMap[u.node.id],(u.previousId||u.nextId)&&this.legacy_resolveMissingNode(e,r,c,u)}}moveAndHover(e,r,n,o,i){const a=this.mirror.getNode(n);if(!a)return this.debugNodeNotFound(i,n);const l=$t(a,this.iframe),s=e*l.absoluteScale+l.x,c=r*l.absoluteScale+l.y;this.mouse.style.left=`${s}px`,this.mouse.style.top=`${c}px`,o||this.drawMouseTail({x:s,y:c}),this.hoverElements(a)}drawMouseTail(e){if(!this.mouseTail)return;const{lineCap:r,lineWidth:n,strokeStyle:o,duration:i}=this.config.mouseTail===!0?tr:Object.assign({},tr,this.config.mouseTail),a=()=>{if(!this.mouseTail)return;const l=this.mouseTail.getContext("2d");!l||!this.tailPositions.length||(l.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),l.beginPath(),l.lineWidth=n,l.lineCap=r,l.strokeStyle=o,l.moveTo(this.tailPositions[0].x,this.tailPositions[0].y),this.tailPositions.forEach(s=>l.lineTo(s.x,s.y)),l.stroke())};this.tailPositions.push(e),a(),setTimeout(()=>{this.tailPositions=this.tailPositions.filter(l=>l!==e),a()},i/this.speedService.state.context.timer.speed)}hoverElements(e){var r;(r=this.lastHoveredRootNode||this.iframe.contentDocument)==null||r.querySelectorAll(".\\:hover").forEach(o=>{o.classList.remove(":hover")}),this.lastHoveredRootNode=e.getRootNode();let n=e;for(;n;)n.classList&&n.classList.add(":hover"),n=n.parentElement}isUserInteraction(e){return e.type!==k.IncrementalSnapshot?!1:e.data.source>N.Mutation&&e.data.source<=N.Input}backToNormal(){this.nextUserInteractionEvent=null,!this.speedService.state.matches("normal")&&(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(j.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(e,r){this.warn(`Node with id '${r}' not found. `,e)}warnCanvasMutationFailed(e,r){this.warn("Has error on canvas update",r,"canvas mutation:",e)}debugNodeNotFound(e,r){this.debug(`Node with id '${r}' not found. `,e)}warn(...e){!this.config.showWarning||this.config.logger.warn($n,...e)}debug(...e){!this.config.showDebug||this.config.logger.log($n,...e)}}const{addCustomEvent:_s}=Le,{freezePage:Ps}=Le;var se=Uint8Array,ue=Uint16Array,rt=Uint32Array,wt=new se([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ct=new se([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rr=new se([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Un=function(t,e){for(var r=new ue(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var o=new rt(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)o[i]=i-r[n]<<5|n;return[r,o]},jn=Un(wt,2),Vn=jn[0],nr=jn[1];Vn[28]=258,nr[258]=28;for(var Bn=Un(Ct,0),$s=Bn[0],Gn=Bn[1],or=new ue(32768),J=0;J<32768;++J){var De=(J&43690)>>>1|(J&21845)<<1;De=(De&52428)>>>2|(De&13107)<<2,De=(De&61680)>>>4|(De&3855)<<4,or[J]=((De&65280)>>>8|(De&255)<<8)>>>1}for(var Se=function(t,e,r){for(var n=t.length,o=0,i=new ue(e);o<n;++o)++i[t[o]-1];var a=new ue(e);for(o=0;o<e;++o)a[o]=a[o-1]+i[o-1]<<1;var l;if(r){l=new ue(1<<e);var s=15-e;for(o=0;o<n;++o)if(t[o])for(var c=o<<4|t[o],u=e-t[o],d=a[t[o]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)l[or[d]>>>s]=c}else for(l=new ue(n),o=0;o<n;++o)l[o]=or[a[t[o]-1]++]>>>15-t[o];return l},Oe=new se(288),J=0;J<144;++J)Oe[J]=8;for(var J=144;J<256;++J)Oe[J]=9;for(var J=256;J<280;++J)Oe[J]=7;for(var J=280;J<288;++J)Oe[J]=8;for(var nt=new se(32),J=0;J<32;++J)nt[J]=5;var Ws=Se(Oe,9,0),Us=Se(Oe,9,1),js=Se(nt,5,0),Vs=Se(nt,5,1),ir=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},ge=function(t,e,r){var n=e/8>>0;return(t[n]|t[n+1]<<8)>>>(e&7)&r},sr=function(t,e){var r=e/8>>0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>>(e&7)},ar=function(t){return(t/8>>0)+(t&7&&1)},lr=function(t,e,r){(e==null||e<0)&&(e=0),(r==null||r>t.length)&&(r=t.length);var n=new(t instanceof ue?ue:t instanceof rt?rt:se)(r-e);return n.set(t.subarray(e,r)),n},Bs=function(t,e,r){var n=t.length,o=!e||r,i=!r||r.i;r||(r={}),e||(e=new se(n*3));var a=function(ce){var me=e.length;if(ce>me){var de=new se(Math.max(me*2,ce));de.set(e),e=de}},l=r.f||0,s=r.p||0,c=r.b||0,u=r.l,d=r.d,h=r.m,p=r.n,m=n*8;do{if(!u){r.f=l=ge(t,s,1);var g=ge(t,s+1,3);if(s+=3,g)if(g==1)u=Us,d=Vs,h=9,p=5;else if(g==2){var S=ge(t,s,31)+257,E=ge(t,s+10,15)+4,I=S+ge(t,s+5,31)+1;s+=14;for(var M=new se(I),L=new se(19),C=0;C<E;++C)L[rr[C]]=ge(t,s+C*3,7);s+=E*3;var Y=ir(L),W=(1<<Y)-1;if(!i&&s+I*(Y+7)>m)break;for(var q=Se(L,Y,1),C=0;C<I;){var U=q[ge(t,s,W)];s+=U&15;var y=U>>>4;if(y<16)M[C++]=y;else{var V=0,B=0;for(y==16?(B=3+ge(t,s,3),s+=2,V=M[C-1]):y==17?(B=3+ge(t,s,7),s+=3):y==18&&(B=11+ge(t,s,127),s+=7);B--;)M[C++]=V}}var A=M.subarray(0,S),F=M.subarray(S);h=ir(A),p=ir(F),u=Se(A,h,1),d=Se(F,p,1)}else throw"invalid block type";else{var y=ar(s)+4,f=t[y-4]|t[y-3]<<8,v=y+f;if(v>n){if(i)throw"unexpected EOF";break}o&&a(c+f),e.set(t.subarray(y,v),c),r.b=c+=f,r.p=s=v*8;continue}if(s>m)throw"unexpected EOF"}o&&a(c+131072);for(var O=(1<<h)-1,G=(1<<p)-1,w=h+p+18;i||s+w<m;){var V=u[sr(t,s)&O],b=V>>>4;if(s+=V&15,s>m)throw"unexpected EOF";if(!V)throw"invalid length/literal";if(b<256)e[c++]=b;else if(b==256){u=null;break}else{var T=b-254;if(b>264){var C=b-257,D=wt[C];T=ge(t,s,(1<<D)-1)+Vn[C],s+=D}var z=d[sr(t,s)&G],ee=z>>>4;if(!z)throw"invalid distance";s+=z&15;var F=$s[ee];if(ee>3){var D=Ct[ee];F+=sr(t,s)&(1<<D)-1,s+=D}if(s>m)throw"unexpected EOF";o&&a(c+131072);for(var X=c+T;c<X;c+=4)e[c]=e[c-F],e[c+1]=e[c+1-F],e[c+2]=e[c+2-F],e[c+3]=e[c+3-F];c=X}}r.l=u,r.p=s,r.b=c,u&&(l=1,r.m=h,r.d=d,r.n=p)}while(!l);return c==e.length?e:lr(e,0,c)},Ne=function(t,e,r){r<<=e&7;var n=e/8>>0;t[n]|=r,t[n+1]|=r>>>8},ot=function(t,e,r){r<<=e&7;var n=e/8>>0;t[n]|=r,t[n+1]|=r>>>8,t[n+2]|=r>>>16},cr=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var o=r.length,i=r.slice();if(!o)return[new se(0),0];if(o==1){var a=new se(r[0].s+1);return a[r[0].s]=1,[a,1]}r.sort(function(I,M){return I.f-M.f}),r.push({s:-1,f:25001});var l=r[0],s=r[1],c=0,u=1,d=2;for(r[0]={s:-1,f:l.f+s.f,l,r:s};u!=o-1;)l=r[r[c].f<r[d].f?c++:d++],s=r[c!=u&&r[c].f<r[d].f?c++:d++],r[u++]={s:-1,f:l.f+s.f,l,r:s};for(var h=i[0].s,n=1;n<o;++n)i[n].s>h&&(h=i[n].s);var p=new ue(h+1),m=ur(r[u-1],p,0);if(m>e){var n=0,g=0,y=m-e,f=1<<y;for(i.sort(function(M,L){return p[L.s]-p[M.s]||M.f-L.f});n<o;++n){var v=i[n].s;if(p[v]>e)g+=f-(1<<m-p[v]),p[v]=e;else break}for(g>>>=y;g>0;){var S=i[n].s;p[S]<e?g-=1<<e-p[S]++-1:++n}for(;n>=0&&g;--n){var E=i[n].s;p[E]==e&&(--p[E],++g)}m=e}return[new se(p),m]},ur=function(t,e,r){return t.s==-1?Math.max(ur(t.l,e,r+1),ur(t.r,e,r+1)):e[t.s]=r},zn=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new ue(++e),n=0,o=t[0],i=1,a=function(s){r[n++]=s},l=1;l<=e;++l)if(t[l]==o&&l!=e)++i;else{if(!o&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(o),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(o);i=1,o=t[l]}return[r.subarray(0,n),e]},it=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},Et=function(t,e,r){var n=r.length,o=ar(e+2);t[o]=n&255,t[o+1]=n>>>8,t[o+2]=t[o]^255,t[o+3]=t[o+1]^255;for(var i=0;i<n;++i)t[o+i+4]=r[i];return(o+4+n)*8},Hn=function(t,e,r,n,o,i,a,l,s,c,u){Ne(e,u++,r),++o[256];for(var d=cr(o,15),h=d[0],p=d[1],m=cr(i,15),g=m[0],y=m[1],f=zn(h),v=f[0],S=f[1],E=zn(g),I=E[0],M=E[1],L=new ue(19),C=0;C<v.length;++C)L[v[C]&31]++;for(var C=0;C<I.length;++C)L[I[C]&31]++;for(var Y=cr(L,7),W=Y[0],q=Y[1],U=19;U>4&&!W[rr[U-1]];--U);var V=c+5<<3,B=it(o,Oe)+it(i,nt)+a,A=it(o,h)+it(i,g)+a+14+3*U+it(L,W)+(2*L[16]+3*L[17]+7*L[18]);if(V<=B&&V<=A)return Et(e,u,t.subarray(s,s+c));var F,O,G,w;if(Ne(e,u,1+(A<B)),u+=2,A<B){F=Se(h,p,0),O=h,G=Se(g,y,0),w=g;var b=Se(W,q,0);Ne(e,u,S-257),Ne(e,u+5,M-1),Ne(e,u+10,U-4),u+=14;for(var C=0;C<U;++C)Ne(e,u+3*C,W[rr[C]]);u+=3*U;for(var T=[v,I],D=0;D<2;++D)for(var z=T[D],C=0;C<z.length;++C){var ee=z[C]&31;Ne(e,u,b[ee]),u+=W[ee],ee>15&&(Ne(e,u,z[C]>>>5&127),u+=z[C]>>>12)}}else F=Ws,O=Oe,G=js,w=nt;for(var C=0;C<l;++C)if(n[C]>255){var ee=n[C]>>>18&31;ot(e,u,F[ee+257]),u+=O[ee+257],ee>7&&(Ne(e,u,n[C]>>>23&31),u+=wt[ee]);var X=n[C]&31;ot(e,u,G[X]),u+=w[X],X>3&&(ot(e,u,n[C]>>>5&8191),u+=Ct[X])}else ot(e,u,F[n[C]]),u+=O[n[C]];return ot(e,u,F[256]),u+O[256]},Gs=new rt([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),zs=new se(0),Hs=function(t,e,r,n,o,i){var a=t.length,l=new se(n+a+5*(1+Math.floor(a/7e3))+o),s=l.subarray(n,l.length-o),c=0;if(!e||a<8)for(var u=0;u<=a;u+=65535){var d=u+65535;d<a?c=Et(s,c,t.subarray(u,d)):(s[u]=i,c=Et(s,c,t.subarray(u,a)))}else{for(var h=Gs[e-1],p=h>>>13,m=h&8191,g=(1<<r)-1,y=new ue(32768),f=new ue(g+1),v=Math.ceil(r/3),S=2*v,E=function(Z){return(t[Z]^t[Z+1]<<v^t[Z+2]<<S)&g},I=new rt(25e3),M=new ue(288),L=new ue(32),C=0,Y=0,u=0,W=0,q=0,U=0;u<a;++u){var V=E(u),B=u&32767,A=f[V];if(y[B]=A,f[V]=B,q<=u){var F=a-u;if((C>7e3||W>24576)&&F>423){c=Hn(t,s,0,I,M,L,Y,W,U,u-U,c),W=C=Y=0,U=u;for(var O=0;O<286;++O)M[O]=0;for(var O=0;O<30;++O)L[O]=0}var G=2,w=0,b=m,T=B-A&32767;if(F>2&&V==E(u-T))for(var D=Math.min(p,F)-1,z=Math.min(32767,u),ee=Math.min(258,F);T<=z&&--b&&B!=A;){if(t[u+G]==t[u+G-T]){for(var X=0;X<ee&&t[u+X]==t[u+X-T];++X);if(X>G){if(G=X,w=T,X>D)break;for(var ce=Math.min(T,X-2),me=0,O=0;O<ce;++O){var de=u-T+O+32768&32767,R=y[de],ie=de-R+32768&32767;ie>me&&(me=ie,A=de)}}}B=A,A=y[B],T+=B-A+32768&32767}if(w){I[W++]=268435456|nr[G]<<18|Gn[w];var H=nr[G]&31,Q=Gn[w]&31;Y+=wt[H]+Ct[Q],++M[257+H],++L[Q],q=u+G,++C}else I[W++]=t[u],++M[t[u]]}}c=Hn(t,s,i,I,M,L,Y,W,U,u-U,c),i||(c=Et(s,c,zs))}return lr(l,0,n+ar(c)+o)},Ys=function(){var t=1,e=0;return{p:function(r){for(var n=t,o=e,i=r.length,a=0;a!=i;){for(var l=Math.min(a+5552,i);a<l;++a)n+=r[a],o+=n;n%=65521,o%=65521}t=n,e=o},d:function(){return(t>>>8<<16|(e&255)<<8|e>>>8)+((t&255)<<23)*2}}},Xs=function(t,e,r,n,o){return Hs(t,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):12+e.mem,r,n,!o)},Zs=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},Ks=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;t[0]=120,t[1]=n<<6|(n?32-2*n:1)},Js=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Qs(t,e){e===void 0&&(e={});var r=Ys();r.p(t);var n=Xs(t,e,2,4);return Ks(n,e),Zs(n,n.length-4,r.d()),n}function qs(t,e){return Bs((Js(t),t.subarray(2,-4)),e)}function Yn(t,e){var r=t.length;if(!e&&typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var n=new se(t.length+(t.length>>>1)),o=0,i=function(c){n[o++]=c},a=0;a<r;++a){if(o+5>n.length){var l=new se(o+8+(r-a<<1));l.set(n),n=l}var s=t.charCodeAt(a);s<128||e?i(s):s<2048?(i(192|s>>>6),i(128|s&63)):s>55295&&s<57344?(s=65536+(s&1047552)|t.charCodeAt(++a)&1023,i(240|s>>>18),i(128|s>>>12&63),i(128|s>>>6&63),i(128|s&63)):(i(224|s>>>12),i(128|s>>>6&63),i(128|s&63))}return lr(n,0,o)}function Xn(t,e){var r="";if(!e&&typeof TextDecoder<"u")return new TextDecoder().decode(t);for(var n=0;n<t.length;){var o=t[n++];o<128||e?r+=String.fromCharCode(o):o<224?r+=String.fromCharCode((o&31)<<6|t[n++]&63):o<240?r+=String.fromCharCode((o&15)<<12|(t[n++]&63)<<6|t[n++]&63):(o=((o&15)<<18|(t[n++]&63)<<12|(t[n++]&63)<<6|t[n++]&63)-65536,r+=String.fromCharCode(55296|o>>10,56320|o&1023))}return r}const dr="v1";var ea=Object.defineProperty,ta=Object.defineProperties,ra=Object.getOwnPropertyDescriptors,Zn=Object.getOwnPropertySymbols,na=Object.prototype.hasOwnProperty,oa=Object.prototype.propertyIsEnumerable,Kn=(t,e,r)=>e in t?ea(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ia=(t,e)=>{for(var r in e||(e={}))na.call(e,r)&&Kn(t,r,e[r]);if(Zn)for(var r of Zn(e))oa.call(e,r)&&Kn(t,r,e[r]);return t},sa=(t,e)=>ta(t,ra(e));const aa=t=>{const e=sa(ia({},t),{v:dr});return Xn(Qs(Yn(JSON.stringify(e))),!0)},la=t=>{if(typeof t!="string")return t;try{const e=JSON.parse(t);if(e.timestamp)return e}catch{}try{const e=JSON.parse(Xn(qs(Yn(t,!0))));if(e.v===dr)return e;throw new Error(`These events were packed with packer ${e.v} which is incompatible with current packer ${dr}.`)}catch(e){throw console.error(e),new Error("Unknown data format.")}};class ze{constructor(e){this.fileName=e.fileName||"",this.functionName=e.functionName||"",this.lineNumber=e.lineNumber,this.columnNumber=e.columnNumber}toString(){const e=this.lineNumber||"",r=this.columnNumber||"";return this.functionName?`${this.functionName} (${this.fileName}:${e}:${r})`:`${this.fileName}:${e}:${r}`}}const ca=/(^|@)\S+:\d+/,Jn=/^\s*at .*(\S+:\d+|\(native\))/m,ua=/^(eval@)?(\[native code])?$/,hr={parse:function(t){if(!t)return[];if(typeof t.stacktrace<"u"||typeof t["opera#sourceloc"]<"u")return this.parseOpera(t);if(t.stack&&t.stack.match(Jn))return this.parseV8OrIE(t);if(t.stack)return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(t.indexOf(":")===-1)return[t];const e=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(t.replace(/[()]/g,""));if(!e)throw new Error(`Cannot parse given url: ${t}`);return[e[1],e[2]||void 0,e[3]||void 0]},parseV8OrIE:function(t){return t.stack.split(`
`).filter(function(e){return!!e.match(Jn)},this).map(function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));let r=e.replace(/^\s+/,"").replace(/\(eval code/g,"(");const n=r.match(/ (\((.+):(\d+):(\d+)\)$)/);r=n?r.replace(n[0],""):r;const o=r.split(/\s+/).slice(1),i=this.extractLocation(n?n[1]:o.pop()),a=o.join(" ")||void 0,l=["eval","<anonymous>"].indexOf(i[0])>-1?void 0:i[0];return new ze({functionName:a,fileName:l,lineNumber:i[1],columnNumber:i[2]})},this)},parseFFOrSafari:function(t){return t.stack.split(`
`).filter(function(e){return!e.match(ua)},this).map(function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),e.indexOf("@")===-1&&e.indexOf(":")===-1)return new ze({functionName:e});{const r=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=e.match(r),o=n&&n[1]?n[1]:void 0,i=this.extractLocation(e.replace(r,""));return new ze({functionName:o,fileName:i[0],lineNumber:i[1],columnNumber:i[2]})}},this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf(`
`)>-1&&t.message.split(`
`).length>t.stacktrace.split(`
`).length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(t){const e=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split(`
`),n=[];for(let o=2,i=r.length;o<i;o+=2){const a=e.exec(r[o]);a&&n.push(new ze({fileName:a[2],lineNumber:parseFloat(a[1])}))}return n},parseOpera10:function(t){const e=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split(`
`),n=[];for(let o=0,i=r.length;o<i;o+=2){const a=e.exec(r[o]);a&&n.push(new ze({functionName:a[3]||void 0,fileName:a[2],lineNumber:parseFloat(a[1])}))}return n},parseOpera11:function(t){return t.stack.split(`
`).filter(function(e){return!!e.match(ca)&&!e.match(/^Error created at/)},this).map(function(e){const r=e.split("@"),n=this.extractLocation(r.pop()),o=(r.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return new ze({functionName:o,fileName:n[0],lineNumber:n[1],columnNumber:n[2]})},this)}};function da(t){if(!t||!t.outerHTML)return"";let e="";for(;t.parentElement;){let r=t.localName;if(!r)break;r=r.toLowerCase();const n=t.parentElement,o=[];if(n.children&&n.children.length>0)for(let i=0;i<n.children.length;i++){const a=n.children[i];a.localName&&a.localName.toLowerCase&&a.localName.toLowerCase()===r&&o.push(a)}o.length>1&&(r+=`:eq(${o.indexOf(t)})`),e=r+(e?">"+e:""),t=n}return e}function pr(t){return Object.prototype.toString.call(t)==="[object Object]"}function Qn(t,e){if(e===0)return!0;const r=Object.keys(t);for(const n of r)if(pr(t[n])&&Qn(t[n],e-1))return!0;return!1}function He(t,e){const r={numOfKeysLimit:50,depthOfLimit:4};Object.assign(r,e);const n=[],o=[];return JSON.stringify(t,function(l,s){if(n.length>0){const c=n.indexOf(this);~c?n.splice(c+1):n.push(this),~c?o.splice(c,1/0,l):o.push(l),~n.indexOf(s)&&(n[0]===s?s="[Circular ~]":s="[Circular ~."+o.slice(0,n.indexOf(s)).join(".")+"]")}else n.push(s);if(s===null)return s;if(s===void 0)return"undefined";if(i(s))return a(s);if(s instanceof Event){const c={};for(const u in s){const d=s[u];Array.isArray(d)?c[u]=da(d.length?d[0]:null):c[u]=d}return c}else{if(s instanceof Node)return s instanceof HTMLElement?s?s.outerHTML:"":s.nodeName;if(s instanceof Error)return s.stack?s.stack+`
End of stack for Error object`:s.name+": "+s.message}return s});function i(l){return!!(pr(l)&&Object.keys(l).length>r.numOfKeysLimit||typeof l=="function"||pr(l)&&Qn(l,r.depthOfLimit))}function a(l){let s=l.toString();return r.stringLengthLimit&&s.length>r.stringLengthLimit&&(s=`${s.slice(0,r.stringLengthLimit)}...`),s}}const qn={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:"console"};function ha(t,e,r){const n=r?Object.assign({},qn,r):qn,o=n.logger;if(!o)return()=>{};let i;typeof o=="string"?i=e[o]:i=o;let a=0,l=!1;const s=[];if(n.level.includes("error")){const u=h=>{const p=h.message,m=h.error,g=hr.parse(m).map(f=>f.toString()),y=[He(p,n.stringifyOptions)];t({level:"error",trace:g,payload:y})};e.addEventListener("error",u),s.push(()=>{e.removeEventListener("error",u)});const d=h=>{let p,m;h.reason instanceof Error?(p=h.reason,m=[He(`Uncaught (in promise) ${p.name}: ${p.message}`,n.stringifyOptions)]):(p=new Error,m=[He("Uncaught (in promise)",n.stringifyOptions),He(h.reason,n.stringifyOptions)]);const g=hr.parse(p).map(y=>y.toString());t({level:"error",trace:g,payload:m})};e.addEventListener("unhandledrejection",d),s.push(()=>{e.removeEventListener("unhandledrejection",d)})}for(const u of n.level)s.push(c(i,u));return()=>{s.forEach(u=>u())};function c(u,d){return u[d]?Re(u,d,h=>(...p)=>{if(h.apply(this,p),!l){l=!0;try{const m=hr.parse(new Error).map(y=>y.toString()).splice(1),g=p.map(y=>He(y,n.stringifyOptions));a++,a<n.lengthThreshold?t({level:d,trace:m,payload:g}):a===n.lengthThreshold&&t({level:"warn",trace:[],payload:[He("The number of log records reached the threshold.")]})}catch(m){h("rrweb logger error:",m,...p)}finally{l=!1}}}):()=>{}}}const mr="rrweb/console@1",pa=t=>({name:mr,observer:ha,options:t}),Nt="__rrweb_original__",ma={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],replayLogger:void 0};class fa{constructor(e){this.config=Object.assign(ma,e)}getConsoleLogger(){const e={};for(const r of this.config.level)r==="trace"?e[r]=n=>{(console.log[Nt]?console.log[Nt]:console.log)(...n.payload.map(o=>JSON.parse(o)),this.formatMessage(n))}:e[r]=n=>{(console[r][Nt]?console[r][Nt]:console[r])(...n.payload.map(o=>JSON.parse(o)),this.formatMessage(n))};return e}formatMessage(e){if(e.trace.length===0)return"";const r=`
	at `;let n=r;return n+=e.trace.join(r),n}}const ga=t=>{const e=t?.replayLogger||new fa(t).getConsoleLogger();return{handler(r,n,o){let i=null;if(r.type===k.IncrementalSnapshot&&r.data.source===N.Log?i=r.data:r.type===k.Plugin&&r.data.plugin===mr&&(i=r.data.payload),i)try{typeof e[i.level]=="function"&&e[i.level](i)}catch(a){o.replayer.config.showWarning&&console.warn(a)}}}};return ne.EventType=k,ne.IncrementalSource=N,ne.MouseInteractions=$,ne.PLUGIN_NAME=mr,ne.Replayer=Fs,ne.ReplayerEvents=j,ne.addCustomEvent=_s,ne.freezePage=Ps,ne.getRecordConsolePlugin=pa,ne.getReplayConsolePlugin=ga,ne.pack=aa,ne.record=Le,ne.unpack=la,ne.utils=_o,Object.defineProperty(ne,"__esModule",{value:!0}),ne}({});
//# sourceMappingURL=rrweb-all.min.js.map
